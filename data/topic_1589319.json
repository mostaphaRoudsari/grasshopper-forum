{"body": "\nDear butterfly team, thanks for updating the butterfly components.\n\n\n\nNow the demo case for outdoor airflow is working, but only when **step 1.2 update fvScheme** is bypassed.\n\n\n\nFirst, allow me to briefly show the steps of the successful run when step 1.2 is bypassed (note that the and OpenFOAM session is open in the background while running the Butterfly demo file):\n\n\n\n1. create wind tunnel, and use different parameters of **(4,4)** for **_globalRefLevel_** as suggested by Theodoro in this **[post](http://www.grasshopper3d.com/group/ladybug/forum/topics/butterfly-doesn-t-work-with-opefoam-v1606?commentId=2985220%3AComment%3A1579523&amp;groupId=2985220%3AGroup%3A658987)**\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtp4tf12bZFqn0r3fP4I8wMD4U7yeRBPbYyN**WOSmnhpt0xIWmLh0VQrM4FWh7vM44K6d7dznaA6RdM2wWlccYn/Image8.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtp4tf12bZFqn0r3fP4I8wMD4U7yeRBPbYyN**WOSmnhpt0xIWmLh0VQrM4FWh7vM44K6d7dznaA6RdM2wWlccYn/Image8.png)\n\n\n\n2. run **blockMesh**:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtrCMY9Bzyu9CU-NEBk5RLmVWwVhUWMT2DJrdTT3aUPD68*rbWGOZJPBX-Q-*wo3gm8BYFFsNA9LolcFMZuyLQfG/Image9.png\" width=\"717\"/>](http://api.ning.com:80/files/lQF20yFeYtrCMY9Bzyu9CU-NEBk5RLmVWwVhUWMT2DJrdTT3aUPD68*rbWGOZJPBX-Q-*wo3gm8BYFFsNA9LolcFMZuyLQfG/Image9.png)\n\n\n\n\n\n3. run **snappyHexMesh**:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtpZTo-dzQZ2fa*AVl6Etkvkbl9vtPnZBfcJHltwgzSXNaJmf45aluEIyWIMcqPb-NZsZ2P8adjldjlyfsg1ik6e/Image10.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtpZTo-dzQZ2fa*AVl6Etkvkbl9vtPnZBfcJHltwgzSXNaJmf45aluEIyWIMcqPb-NZsZ2P8adjldjlyfsg1ik6e/Image10.png)\n\n\n\n\n\n4. run **checkMesh**:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtojW8JSQ2qZambcPqB-nVEUUMRDlALdkR1PPY9CAZucMjKTNRKhqHGBv7FQ9I7f45ZM02ah7a5SLBW*tl*ce8f4/Image12.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtojW8JSQ2qZambcPqB-nVEUUMRDlALdkR1PPY9CAZucMjKTNRKhqHGBv7FQ9I7f45ZM02ah7a5SLBW*tl*ce8f4/Image12.png)\n\n\n\n\n\n5. connect the case from **checkMesh** to **simpleFOAM** and run the simulation:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtpCavlBAf7*1kYh8BwWlUEl-5C4vTR-AqTtmh7qQKnKIancV1bboFvIjBFb8byKahdvvuFBjajJcB07PIeikYbQ/Image13.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtpCavlBAf7*1kYh8BwWlUEl-5C4vTR-AqTtmh7qQKnKIancV1bboFvIjBFb8byKahdvvuFBjajJcB07PIeikYbQ/Image13.png)\n\n\n\n\n\n6. the simulation converged at 1865 iteration, but the results visualization part has some problem:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtp0sbZAyl2VCQnumE9YkdTlryDF-VgWFOY4vPyjPpuPkVHZ5t2Vg-ohdS271lbBNbDaYM32FS*-6BYKRUfiZplB/Image4.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtp0sbZAyl2VCQnumE9YkdTlryDF-VgWFOY4vPyjPpuPkVHZ5t2Vg-ohdS271lbBNbDaYM32FS*-6BYKRUfiZplB/Image4.png)\n\n\n\n\n\n7. so I revised this part according to suggestions from [Hagit:](http://www.grasshopper3d.com/group/ladybug/forum/topics/butterfly-block-mesh-error?commentId=2985220%3AComment%3A1587110&amp;groupId=2985220%3AGroup%3A658987)\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtp07sHPEIcSunQLgn-mythZkPvQgqgPbo4dNht7TRVPzX8*cO0M40VWZMcQpNBJjzbo0PdnkLascEoXt7nOy7zx/Image14.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtp07sHPEIcSunQLgn-mythZkPvQgqgPbo4dNht7TRVPzX8*cO0M40VWZMcQpNBJjzbo0PdnkLascEoXt7nOy7zx/Image14.png)\n\n\n\n\n\n8. and the results can be visualized for P and U values:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtrQpytW9HGD4d04dPc2d5zngsx5zAvm03vEL2exfR4x4cRBSgY-Hmht67-j1JCVARI0WoDZbCy6caynHu*iQqaW/Image5.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtrQpytW9HGD4d04dPc2d5zngsx5zAvm03vEL2exfR4x4cRBSgY-Hmht67-j1JCVARI0WoDZbCy6caynHu*iQqaW/Image5.png)[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtrAtIHXk3cyLYfl83kUEV7yZDo*kvQtRm4HcF9kMVNRT0k20Y06uppGvFXRHj7k-kNbDtw2vCpWhWFdSOYi2ptJ/Image6.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtrAtIHXk3cyLYfl83kUEV7yZDo*kvQtRm4HcF9kMVNRT0k20Y06uppGvFXRHj7k-kNbDtw2vCpWhWFdSOYi2ptJ/Image6.png)\n\n\n\nThe GH file used for the successful run shown above is attached here.\n\n\n\n\n\nNow, the following is the error I got when the case from the update fvScheme component is used for simpleFOAM simulation:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/lQF20yFeYtr6O-cjWZf1md5*1n0wGHypMtgI5W9Dan2lh0089tQWW4dyDPWZAJruVKc3eyTYHC3VPgZf5Wd*cXxw1mGOvyk2/Image7.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/lQF20yFeYtr6O-cjWZf1md5*1n0wGHypMtgI5W9Dan2lh0089tQWW4dyDPWZAJruVKc3eyTYHC3VPgZf5Wd*cXxw1mGOvyk2/Image7.png)\n\nthe warning message on the simpleFOAM component is:\n\n1. Solution exception:<br/> \u00a0--&gt; OpenFOAM command Failed!#0\u00a0 Foam::error::printStack(Foam::Ostream&amp;) in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/lib/libOpenFOAM.so\"<br/> \u00a0#1\u00a0 Foam::sigFpe::sigHandler(int) in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/lib/libOpenFOAM.so\"<br/> \u00a0#2\u00a0 ? in \"/lib64/libc.so.6\"<br/> \u00a0#3\u00a0 double Foam::sumProd&lt;double&gt;(Foam::UList&lt;double&gt; const&amp;, Foam::UList&lt;double&gt; const&amp;) in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/lib/libOpenFOAM.so\"<br/> \u00a0#4\u00a0 Foam::PCG::solve(Foam::Field&lt;double&gt;&amp;, Foam::Field&lt;double&gt; const&amp;, unsigned char) const in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/lib/libOpenFOAM.so\"<br/> \u00a0#5\u00a0 Foam::GAMGSolver::solveCoarsestLevel(Foam::Field&lt;double&gt;&amp;, Foam::Field&lt;double&gt; const&amp;) const in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/lib/libOpenFOAM.so\"<br/> \u00a0#6\u00a0 Foam::GAMGSolver::Vcycle(Foam::PtrList&lt;Foam::lduMatrix::smoother&gt; const&amp;, Foam::Field&lt;double&gt;&amp;, Foam::Field&lt;double&gt; const&amp;, Foam::Field&lt;double&gt;&amp;, Foam::Field&lt;double&gt;&amp;, Foam::Field&lt;double&gt;&amp;, Foam::Field&lt;double&gt;&amp;, Foam::Field&lt;double&gt;&amp;, Foam::PtrList&lt;Foam::Field&lt;double&gt; &gt;&amp;, Foam::PtrList&lt;Foam::Field&lt;double&gt; &gt;&amp;, unsigned char) const in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/lib/libOpenFOAM.so\"<br/> \u00a0#7\u00a0 Foam::GAMGSolver::solve(Foam::Field&lt;double&gt;&amp;, Foam::Field&lt;double&gt; const&amp;, unsigned char) const in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/lib/libOpenFOAM.so\"<br/> \u00a0#8\u00a0 Foam::fvMatrix&lt;double&gt;::solveSegregated(Foam::dictionary const&amp;) in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/lib/libfiniteVolume.so\"<br/> \u00a0#9\u00a0 Foam::fvMatrix&lt;double&gt;::solve(Foam::dictionary const&amp;) in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/bin/simpleFoam\"<br/> \u00a0#10\u00a0 Foam::fvMatrix&lt;double&gt;::solve() in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/bin/simpleFoam\"<br/> \u00a0#11\u00a0 ? in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/bin/simpleFoam\"<br/> \u00a0#12\u00a0 __libc_start_main in \"/lib64/libc.so.6\"<br/> \u00a0#13\u00a0 ? in \"/opt/OpenFOAM/OpenFOAM-v1606+/platforms/linux64GccDPInt32Opt/bin/simpleFoam\"<br/>\n\n\n\nThe error message from the readMe! output node is attached below as a text file.\n\n\n\nHope you can kindly advise what the important steps or parameters I might have missed here. I assume it might be related to OpenFOAM rather than with the Butterfly workflow...\n\n\n\nThank you very much!\n\n- Ji\n\n\n\n\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1589317", "name": "butterfly_simpleFOAM_error.txt"}, {"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1589318", "name": "outdoor_airflow_ZJ_v004.gh"}], "created_by_name": "Grasshope", "created_at": "August 27, 2016 at 1:14am", "created_by": "Grasshope", "topic": "butterfly test: simulation for case with fvScheme updated is not working", "id": "topic_1589319"}