{"body": "\nHi,\n\nI've been noticing that the HB_IndoorViewFactor's viewFactorMesh output changes the mesh of the original HBZones. In the following image we can see that the zones BEFORE the viewFactor have some geometry and AFTER they are different. At the top the zones before (each zone with a different color). At the bottom after. There are 3 zones changed.\n\n\n\nI'm not sure this is producing \"wrong\" calculations for the different comfort models and so, but wanted to bring this to your knowledge and response.\n\nThere are other cases that we get less meshes/zones than those in the input.\n\nAny words of wisdom?\n\n\n\nThanks,\n\n-A.\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/noNLDbauUJDWqBq0eYrjE5z6RbelpJkUhNt9e4G9iyf2NGpya2aXh0ZJkyt1mh6K93E1Qc78NyBnPoOePjSGSsPwcK13BV-E/Capture1.JPG?width=750\" width=\"750\"/>](http://api.ning.com:80/files/noNLDbauUJDWqBq0eYrjE5z6RbelpJkUhNt9e4G9iyf2NGpya2aXh0ZJkyt1mh6K93E1Qc78NyBnPoOePjSGSsPwcK13BV-E/Capture1.JPG)\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "December 1, 2016 at 2:13am", "created_by": "AbrahamYezioro", "topic": "HBZones before and after HB_IndoorViewFactor - Differences", "replies": [{"body": "\nHi Abraham, Thank you for sharing this. Chris should comment on this. To me it looks like something that is better suited to be discussed on github.\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "December 1, 2016 at 11:29am", "created_by": "MostaphaSadeghipour", "replies": [{"body": "\nOK. Opened an issue [there](https://github.com/mostaphaRoudsari/Honeybee/issues/579).\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "December 1, 2016 at 12:05pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAbraham,\n\nI'm having a bit of a hard time understanding what is going on in your file but perhaps this is what you are noticing: \u00a0The view factor mesh component outputs meshes on a \"continuous air volume\" basis rather than a zone-by-zone basis. \u00a0So, if you have two zones that share an air wall, there will be one mesh output for both zones. \u00a0If there is a solid wall between zones, two separate meshes will be output.\n\nDoes this answer your question?\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "December 1, 2016 at 5:23pm", "created_by": "ChrisMackey", "replies": []}, {"body": "\nHi Chris,\n\nYes. This answers the question. We have airwalls between the zones, and so i was thinking something like this can explain the output meshes.\n\nThough, what we want from the evaluations is to get the percentage of comfort per room. The continuous mesh messes this a bit. See the zone in the middle (is a corridor) which became a small square at the bottom (but also the other 2 that doesn't corresponf to the original zones).\n\nOK. Thanks again. I understand the situation.\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "December 1, 2016 at 9:18pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAbraham,\n\nGood question. \u00a0If you plug in custom surfaces into the viewFactor component and disjoint them afterwards, you can use the number of faces in the disjointed mesh to separate the results of the microclimate map by zone like so:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/jPkKNYv*PqQN-UFXsl5tSBwSvL4kTnzl1MqihcJ2jRznYuyIrF5kjr3Yr887JoynjUHkUGS9O9hIyzIYWC3Xt9s8psS9U0es/PartitionResultsByZone.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/jPkKNYv*PqQN-UFXsl5tSBwSvL4kTnzl1MqihcJ2jRznYuyIrF5kjr3Yr887JoynjUHkUGS9O9hIyzIYWC3Xt9s8psS9U0es/PartitionResultsByZone.JPG)\n\nI attached an example file to illustrate this.\n\n-Chris\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1650481", "name": "Indoor_Microclimate_Map_CustomSrfs.gh"}], "created_by_name": "Chris Mackey", "created_at": "December 2, 2016 at 5:26am", "created_by": "ChrisMackey", "replies": []}, {"body": "\nAh, Wait. I see that you are already disjointing the mesh in your file. \u00a0You may just have to play with the input viewFactor surfaces a bit to get exactly what you are after.\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "December 2, 2016 at 5:29am", "created_by": "ChrisMackey", "replies": []}, {"body": "\nThanks Chris,\n\nThe input now are the floor surfaces you get from the HB_decomposeByType component..\n\nI'll see what else can be done here.\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "December 2, 2016 at 7:35am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nHi Chris,\n\nI've been playing a lot but so far i don't like the game ... :-)\n\nPlease see attached, where i tried to summarize what i tried. Maybe you have more ideas and probably better.\n\nI have 7 zones. In zones 3 and 5 i splitted the floors/ceilings in order to enable the E+ full shadow calculations.\n\nThe top of the table shows the default situation. I use the decomposeByType floors for the distFromFloorOrSrf_ input in the viewFactor component. At the right of this you see the influence of changing the grid size: The 0.5 change the configuration of the zones. Grid size 1 joins more areas resulting in less zones (comparing to the original number).\n\nAt the bottom i joined the floor meshes for the relevant zones (3 and 5). The result is even worst. Some areas are missing in the mesh calculation of the viewFactor.\n\n\n\nRight now can't think what else to try. Do you have any (brilliant) idea?\n\nImportant to say that there are airwalls between zone 5 and all other zones.\n\nThanks,\n\n-A.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1651739", "name": "ViewFactorCases.docx"}], "created_by_name": "Abraham Yezioro", "created_at": "December 4, 2016 at 7:03am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAbraham,\n\nBased on your comments and the feedback that I got from someone else using the microclimate maps, I have decided to make a small change to the component, which should allow you to get out the results on a zone-by-zone or region-by-region basis more easily:\n\n[https://github.com/mostaphaRoudsari/Honeybee/commit/502f6ca26cdca22...](https://github.com/mostaphaRoudsari/Honeybee/commit/502f6ca26cdca22bd8a6b04b9b2d82647501bf9a)\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/pM70oMcIKzNm2BwyBrs02wQ5k*f9Fg4cuaV*kJ83xzdNSyJYLdJ8dkHAwjFGd1-ifQAgodOrAeZTgXh-ne*Y964XlLyaYX85/ZoneByZoneMicroclimateResults.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/pM70oMcIKzNm2BwyBrs02wQ5k*f9Fg4cuaV*kJ83xzdNSyJYLdJ8dkHAwjFGd1-ifQAgodOrAeZTgXh-ne*Y964XlLyaYX85/ZoneByZoneMicroclimateResults.JPG)\n\nThe viewFactor component no longer tries to join all of the meshes together when you plug in custom surfaces to distFromFloorRoSrf. \u00a0So, if you use the method in the attached file, you should always be able to get results organized on a zone-by-zone basis. \u00a0This will also work if you need results on a region-by-region basis within a zone or continuous air volume by plugging in multiple, disconnected surfaces.\n\nLet me know if this addresses your issue.\n\n-Chris\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1651566", "name": "Indoor_Microclimate_Map_CustomSrfs3.gh"}], "created_by_name": "Chris Mackey", "created_at": "December 4, 2016 at 11:09am", "created_by": "ChrisMackey", "replies": []}, {"body": "\nHi Chris,\n\nThis is GREAT!!!! Is working fine ... so far. Fantastic!!\n\nMillion thanks,\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "December 4, 2016 at 12:57pm", "created_by": "AbrahamYezioro", "replies": []}]}], "id": "1649752"}