{"body": "\nHi Mostapha,\n\n\n\nI've created a good function to merge shading surfaces generated by LB shading designer.<br/>It consist in a smart loop, I have done a couple of examples, here you can see what happens with 143 vectors, 290 vectors... The result of the present function is red and the one of my function is yellow..\n\nThis function could be useful when you connect multiple hours and multiple months:\n\n[<img class=\"align-center\" src=\"http://api.ning.com:80/files/DgdNDUhtA4H-V9kuQn5Pw9D3bMYP7aaQtlfFU75EvMsZvHAWvTuyogZreEtvxUHC5Cqt7n5JOyA2KhHETOK-v3uI1VdR3Op5/01_DNA.png?width=400\" width=\"400\"/>](http://api.ning.com:80/files/DgdNDUhtA4H-V9kuQn5Pw9D3bMYP7aaQtlfFU75EvMsZvHAWvTuyogZreEtvxUHC5Cqt7n5JOyA2KhHETOK-v3uI1VdR3Op5/01_DNA.png)\n\n[<img class=\"align-center\" src=\"http://api.ning.com:80/files/DgdNDUhtA4G7BJ64MR8zsLyX83fA-c88OEOAaHcaXiALOA9AWzkjp3fH7xYH9davaL2wetSmkjXe1NYbVbSt9vGQMd1KMoun/02_DNA.png?width=400\" width=\"400\"/>](http://api.ning.com:80/files/DgdNDUhtA4G7BJ64MR8zsLyX83fA-c88OEOAaHcaXiALOA9AWzkjp3fH7xYH9davaL2wetSmkjXe1NYbVbSt9vGQMd1KMoun/02_DNA.png)\n\n[<img class=\"align-center\" src=\"http://api.ning.com:80/files/DgdNDUhtA4FMjlBbdV0kV3rQyyEQVavX7ewZp3f0b6vAzRB8U2QyPDXai7kRO43Rm4uX9uCtz1SQZQ5J8v2k7QoBBezqdC-V/03_DNA.png?width=400\" width=\"400\"/>](http://api.ning.com:80/files/DgdNDUhtA4FMjlBbdV0kV3rQyyEQVavX7ewZp3f0b6vAzRB8U2QyPDXai7kRO43Rm4uX9uCtz1SQZQ5J8v2k7QoBBezqdC-V/03_DNA.png)\n\nThe only limit should be the memory of a machine, but this depends by the case to solve, if it is complicated or not.\n\n\n\nBest<br/>Antonello\n", "attachments": [], "created_by_name": "Antonello Di Nunzio", "created_at": "April 17, 2016 at 9:39am", "created_by": "AntonelloDiNunzio", "topic": "mergeVectors_ function of Ladybug_ShadingDesigner", "replies": [{"body": "\nHi Antonello, Nice work! What do you think is the next step? Should we integrate it into the component itself so in case the old method failed to join the curves the component will try your solution as an alternative?\n\n\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "April 20, 2016 at 6:49am", "created_by": "MostaphaSadeghipour", "replies": [{"body": "\nHi Mostapha,\n\n\n\nYes, I think it is a good idea. I attached a file where you can see the function. It is not perfect yet, but I think its method\u00a0is very interesting. I think Rhino 5 has some issues with boolean union functions, because sometimes it doesn't work with some lists of curves or surfaces, but if you try to change the order of elements and then repeating the function, it works.\n\nAnd this is basically what my function does. However, sometimes it is very slow or it could go to an infinite loop when the solution is almost impossible. For this reason I wrote a limit condition inside the loop.\n\n\n\nIf you want and you are interested in it, you could work on this method.\n\n\n\nBest <br/>Antonello\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1513502", "name": "merge_function_antonello.gh"}], "created_by_name": "Antonello Di Nunzio", "created_at": "April 22, 2016 at 3:27am", "created_by": "AntonelloDiNunzio", "replies": []}, {"body": "\nHi Antonello,\n\nThank you for posting the definition. I have two comments.\n\n1. How does your merge function handles nonplanar shading surfaces? It can happen if the user uses non-planar\u00a0optionalShdSrf_.\n\n2. I suggest to update your code to use RhinoCommon. Rhinoscripts can be very slow and is not the best choice for heavy calculations.\n\nMostapha\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "April 23, 2016 at 5:44pm", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nHi Mostapha and Antonello,\n\nAs i understand the SHDDesigner doesn't deal with nonplanar surfaces. The definition says \"An optional shade surface representing a 2D area ...\". So i assume you are asking about how it works with such planes? So, just tested and it works fine while the original component didn't.\n\nI am working on an option for nonplanar surfaces and will continue working with Antonello (right?) to get it ready. I suppose we will update the forum at some point if we get things working.\n\n\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "April 23, 2016 at 9:44pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nWe should fix the input description. ShadingDesigner handles planar and nonplanar surfaces and tries to merge them if needed. Here is an example:\n\n\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/COTpG8VCG7Rc6Zl0LolXQUlEvTtAAwut76heor5iZuote1Y9Yn7nJjXLcWPkfdgOb5yIrmPO1YcqGx1xG*Hvn0GO0T4xbre2/nonplanar_shading.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/COTpG8VCG7Rc6Zl0LolXQUlEvTtAAwut76heor5iZuote1Y9Yn7nJjXLcWPkfdgOb5yIrmPO1YcqGx1xG*Hvn0GO0T4xbre2/nonplanar_shading.png)\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "April 24, 2016 at 11:11am", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nHmmmmm ...\n\nI see. Though for some reason, for all test i do i don't get the merged surface right. I suppose the key word is \"tries\" :-)\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "April 24, 2016 at 11:58am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nBoolean union in Rhino is tricky and doesn't always work as expected. Can you share once of your cases which fails?\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "April 24, 2016 at 3:19pm", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nSure.\n\nSee attached some cases. None of them work as expected.\n\nIn addition, one of my double checks is the LB_viewFromSun.\n\nThanks,\n\n-A.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1515876", "name": "SHDDesigner_MergeIssues.gh"}], "created_by_name": "Abraham Yezioro", "created_at": "April 24, 2016 at 9:55pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nHi Abraham\n\n\n\nI tested your file, I think the problem in this special cases should be the method of the component, if I understand well, the component projects\u00a0each shading surfaces using the relative vector onto the optional surface. Then it joins them together, I haven't read the code of the component but I have imaged something like that.\n\n\n\n\n\nHi Mostapha\n\n\n\nIs it right, Mostapha?\n\nI have thought another method and maybe it should be easier, obviously we have to see if it true for all cases. These are some images of the result of this alternative\u00a0method.\n\n[<img class=\"align-center\" src=\"http://api.ning.com:80/files/0WuMWQHSRPsVAgNlikIQJNCkYcu8gs9nv*ytV4ALvt30yOaYlK4C9ki2VFLY*MaAYNp7usgtEqQusuN3cv38URd69Bs9AL8z/december_test01.png?width=450\" width=\"450\"/>](http://api.ning.com:80/files/0WuMWQHSRPsVAgNlikIQJNCkYcu8gs9nv*ytV4ALvt30yOaYlK4C9ki2VFLY*MaAYNp7usgtEqQusuN3cv38URd69Bs9AL8z/december_test01.png)\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/0WuMWQHSRPufXVs*vy4N1QjBIbCPoFKkBtea-4b7h9qz*JbYyCmaUisH5Ub8Ip*5pEg*wL*eRYHBgYcc0kAHb7w22ssWz58f/december_test02.png?width=450\" width=\"450\"/>](http://api.ning.com:80/files/0WuMWQHSRPufXVs*vy4N1QjBIbCPoFKkBtea-4b7h9qz*JbYyCmaUisH5Ub8Ip*5pEg*wL*eRYHBgYcc0kAHb7w22ssWz58f/december_test02.png)\n\n[<img class=\"align-center\" src=\"http://api.ning.com:80/files/0WuMWQHSRPsrXEtITpjtEHEze9N7dVibFsa5Tke4yfH8nrUC*gRbO1SY*UFaB422R7rhGTcqSb04oGzlzcen7yXf0J-PNrHV/december_test03.png?width=450\" width=\"450\"/>](http://api.ning.com:80/files/0WuMWQHSRPsrXEtITpjtEHEze9N7dVibFsa5Tke4yfH8nrUC*gRbO1SY*UFaB422R7rhGTcqSb04oGzlzcen7yXf0J-PNrHV/december_test03.png)\n\n\n\nP.S. Abraham\n\nProbably, I found an alternative method of the component of pergola shading. I'll let you know.\n\n\n\nBest\n\nAntonello\n", "attachments": [], "created_by_name": "Antonello Di Nunzio", "created_at": "April 25, 2016 at 9:43am", "created_by": "AntonelloDiNunzio", "replies": []}, {"body": "\nHi Antonello. This looks great and apparently works for all the cases. Well done!\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "April 25, 2016 at 10:22am", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nHi Antonello and Mostapha,\n\nCurious to see the alternative method.\n\nIn the meanwhile flipping the normals of the input surfaces worked for some of the cases.\n\n\n\nAntonello: I'll get into you right after this for the pergola ...\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "April 25, 2016 at 11:58am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAntonello,\n\nThis is awesome! \u00a0I always had a sense that this method could be improved. \u00a0Send a pull request with the new component when you get the chance. \u00a0Even if it's written in rhinoscript instead of rhinocommon, a slower component that never fails seems better than a fast component that fails and we can always try to change the rhinoscript over to rhinocommon later. \u00a0Also, I can re-write that incorrect description once you send the pull request.\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "April 29, 2016 at 11:42am", "created_by": "ChrisMackey", "replies": []}]}], "id": "1510427"}