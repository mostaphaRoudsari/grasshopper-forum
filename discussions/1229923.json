{"body": "\nI think there might be one or two bugs in the HB Set Ideal Air Loads Parameters component. \u00a0First, setting the airSideEconomizer boolean to True returns the following error:\n\n\n\n** Severe ** InitPurchasedAir: In ZoneHVAC:IdealLoadsAirSystem = ZONE1 IDEAL LOADS AIR SYSTEM<br/>** ~~~ ** There is outdoor air with economizer active but there is no limit on cooling air flow rate.<br/>** ~~~ ** Cooling Limit must be set to LimitFlowRate or LimitFlowRateAndCapacity, and Maximum Cooling Air Flow Rate must be set to a value or autosize.<br/>** ~~~ ** Simulation will proceed with no limit on outdoor air flow rate.\n\n\n\nWhen I set the IDF to LimitFlowRate and autosize, it ran without an error but the cooling energy use was the same as without.\n\n\n\nSecondly, I found that running the Ideal Loads System with or without the Economizer and/or Demand Control returned identical cooling energy use. \u00a0It was only when I went into the IDF file and input the Outside Air Method as \"None\" that the cooling energy went to zero.\n\n\n\nI discovered all this while trying to model a simple Ideal Loads System with no cooling, but I wasn't able to get results with no cooling energy straight out of HB. \u00a0I set the thermostat setpoint schedule to 40 degrees (using the CSV schedule of 8760 values of \"40\" that Chris suggested). \u00a0Any further help would be greatly appreciated. \u00a0I'm attaching the HB file I've been using for reference.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1229922", "name": "05_HVACIssues.gh"}], "created_by_name": "Burin", "created_at": "February 22, 2015 at 9:14pm", "created_by": "Burin", "topic": "Ideal Loads Outdoor Air Economizer", "replies": [{"body": "\nBurin,\n\nSorry for getting back so late. \u00a0This is great that you are testing this out as the air side economizer of EnergyPlus is something that I have been struggling to understand for a while. \u00a0Thanks to the information that you have provided here, I think that I finally understand it and I am able to make some meaningful changes in the components.\n\n\n\nFirst, I have come to realize that, with the current specifications of flow/person and flow/floor area that the OpenStudio libraries have (and corresponding outdoor air object), there is essentially an assumption of demand controlled ventilation any time that the total flow/floor area is below that of the total flow/person (by default, this seems to be the case for most OpenStudio programs). \u00a0Accordingly, to put in an option for demand controlled ventilation on the ideal air loads parameters component is incorrect and I have since taken it out (I have replaced it with something else described later).\n\n\n\nSecond, the big decrease in energy that you see from switching the outdoor air object to \"None\" is not because the air economizer is working. \u00a0Rather, it is because you eliminated the requirement of fresh air changes for your zone. As such, in a tightly sealed building with low infiltration, there is a danger that occupants might not be getting enough fresh air with this setting. \u00a0Still, this frees up the airflow of the system to be moderated and the supply temperature to be a nicer levels (see further explanation below).\n\n\n\nThirdly, I have realized that the Ideal Air System is very simple any only works in one of two ways: 1) It takes a specified outdoor air fraction and moderates the temperature of the air to meet the cooling/heating load or 2) It takes a specified supply air temperature and moderates the volume of air to meet the cooling load. \u00a0The former uses a lot more energy because it often has to make supply air that is at very cold or very hot but always ensures the specified amount of outdoor air is met for the occupants and uses the ventilationPerArea and ventilationPerPerson inputs. \u00a0The latter risks not supplying the right amount of fresh air if the building is tightly sealed and completely ignores the ventilatioPerArea and ventilationPerPerson inputs but returns energy values that are more reasonable. \u00a0It is also closer in principle to how modern-day VAV or VRF systems operate. \u00a0After a long internal debate with myself, I have decided to make the former one (with lower energy values modulating the volume of flow) the default. \u00a0I now give you the option to switch between the two with a boolean on the ideal Air Parameters component.\n\nClearly, the air side economizer has a larger effect when the air volume is allowed to modulate so I think that you should now see larger changes in energy use from adding it in. \u00a0I have also noticed that adding in the economizer while letting the supply air temperature rise seems to give some pretty high reductions in cooling energy.\n\n\n\nThanks again and I have attached an updated file.\n\n\n\n-Chris\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1231172", "name": "05_HVACIssues_CWM.gh"}], "created_by_name": "Chris Mackey", "created_at": "February 24, 2015 at 8:37pm", "created_by": "ChrisMackey", "replies": [{"body": "\nThanks for taking a look at this Chris. (Thanks also for the ctrl+B tip!) \u00a0I've spent a few hours testing the revised component and I'm having a hard time understanding the results. \u00a0I'm still finding that adding the economizer makes almost no difference in the cooling energy use.\n\n\n\n\n\nThe HoverOver description for the modulateFloworTemp parameter is confusing, but after looking at the IDF files, here is how I understand what you've done:\n\nmodulateFlow = True: sets Outdoor Air Method to \"None.\"\n\nmodulateFlow = False:\u00a0sets Outdoor Air Method to \"Maximum.\"\n\nairSideEconomizer = True: sets\u00a0Cooling Limit to \"LimitFlowRate,\" Maximum Cooling to \"autosize,\" and Economizer Type to \"DifferentialDryBulb.\"\n\nairSideEconomizer = False: sets\u00a0Cooling Limit to \"NoLimit,\" and Economizer Type to \"blank.\"\n\n\n\nFirst, I found that when the Outdoor Air Method set to None, the Economizer is not available so coupling the Economizer with your \"VAV\" method yields no difference in the results.\n\n\n\nSecond, I'm baffled by the results when the modulateFlow is False and the airSideEconomizer is True. \u00a0I'm seeing the ventilation airflow increase (compared to no Economizer) but the cooling energy remain identical.\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/njfi925B3DBCBIs0XrX*ofoiX947B3xV5Axrf*x7IdHHPQYbw*zXOOONZz7OElKFuoSldfwCaU6NaF3Yx2OZa6nShdX361ez/CoolingComparison.jpg?width=721\" width=\"721\"/>](http://api.ning.com:80/files/njfi925B3DBCBIs0XrX*ofoiX947B3xV5Axrf*x7IdHHPQYbw*zXOOONZz7OElKFuoSldfwCaU6NaF3Yx2OZa6nShdX361ez/CoolingComparison.jpg)\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/njfi925B3DCjf7kgElPtNIIgmws9MChhdYrb2LvFenKWZSpGxehc20*P2P4hd067RkoK*cfhD*w8vKAY4XwKMtxGzNwbag3y/ACHComparison.jpg?width=721\" width=\"721\"/>](http://api.ning.com:80/files/njfi925B3DCjf7kgElPtNIIgmws9MChhdYrb2LvFenKWZSpGxehc20*P2P4hd067RkoK*cfhD*w8vKAY4XwKMtxGzNwbag3y/ACHComparison.jpg)\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/njfi925B3DALmb25PrqQd1PGyMFfay3ISkhkpPN*wjHSWI-ecOSf6kp52OfCURb5xA6iOptBQm6MTZRBZnflZ6xRZFzR1axI/SupplyAirflowComparison.jpg?width=721\" width=\"721\"/>](http://api.ning.com:80/files/njfi925B3DALmb25PrqQd1PGyMFfay3ISkhkpPN*wjHSWI-ecOSf6kp52OfCURb5xA6iOptBQm6MTZRBZnflZ6xRZFzR1axI/SupplyAirflowComparison.jpg)\n\nThird, this doesn't hugely impact the results but as an aside, if you were to use the\u00a0\"Sum\" of the area and occupant ventilation (rather than the Max), it would more closely reflect ASHRAE ventilation requirements.\n\n\n\n\n\nFinally, forgive me for asking a dumb question, but after updating LB and HB the Ideal Loads Component does not update to the one you attached. \u00a0Is this because your new component isn't committed to github yet?\n\n\n\nSorry for the lengthy response - I hope it helps clarify.\n\n\n", "attachments": [], "created_by_name": "Burin", "created_at": "February 28, 2015 at 4:27pm", "created_by": "Burin", "replies": []}, {"body": "\nHi Burin,\n\nThanks for looking into this and clarifying what the boolean toggle options does for the IDF. \u00a0I am sorry for not explaining this in my initial response.\n\nTo be honest, I am still confused by the results myself and I am open to changing the name/description of the input based on what you have found here. \u00a0modulateFlowOrTemp is not the best name for what seems to be going on and we should change it to reflect more what is happening in the IDF.\n\n\n\nHere is how I am understanding the results of the different cases:\n\n1) When the variable flow option is selected (and the outdoor air set to \"None\"), the heating and cooling of the space seems to happen only through re-circulation of the indoor air. \u00a0My comparison to a VAV system was not appropriate and perhaps it would be better to compare it to a window air conditioner or a warm air furnace, which, as far as I understand, only re-circulate indoor air and do not bring in outside air.\n\n2) My reasoning for the name\u00a0modulateFlowOrTemp came mostly from my realization that the supply air temperature remained within the defined limits when\u00a0\u00a0the variable flow option is selected (and the outdoor air set to \"None\"). \u00a0When the outdoor air was set to Maximum or Sum, the supply air temperature went way out of the temperature limits that I initially set. \u00a0I realize now that the flows are varying in both cases and the name of the input really must change.\n\n3) I think that the reason why we don't see any effect from the air side economizer is because the heating/cooling energy results that you get from an ideal air system are just the sum of the sensible and the latent heat added/removed from the zone by the system. This value of heat added or removed from the zone does not change whether the added/removed heat comes from outside air or from a cooling/heating coil. \u00a0Since there is no cooling coil or boiler or chiller in an ideal air system, there is no way to request an output of the energy added/removed by such a coil or chiller as opposed to that removed/added by outside air. \u00a0In other words, the air side economizer option on the ideal air system is practically useless because it does not help us differentiate the cooling that comes from the outside air vs. that which comes from a coil. \u00a0All that it does is change the outdoor air fraction while keeping the reported cooling/heating values the same.\n\n\n\nPlease let me know if you think that this explanation makes sense, Burin and, in light of all this, I am very interested in your suggestions.\n\n\n\nFrom my own perspective, I am now convinced that the default should definitely have the outside air requirements set to \"None\" since, otherwise, we cannot distinguish cooling/heating that happens from addition of outside air and that which must be supplied by a coil. \u00a0At least when we get rid of the outside air requirement, we can be sure that the ideal air system values are only showing heating/cooling from a coil or HVAC system.\n\n\n\nI have decided to remove the airsideEconomizer input since it seems to give misleading expectations. \u00a0I am going to recommend here on out that, if you want to estimate the effect of increasing outside air on cooling, you should use the \"Set EP Airflow\" component, use fan-driven natural ventilation, and you should connect a custom CSV schedule of airflow. \u00a0You will have to create such a schedule with native GH components using the outside air temperature, your zone setpoints, and the times that you are cooling in your initial run of E+. \u00a0Either you do this or you set up a full-blown system with OpenStudio.\n\n\n\nI have also decided to get rid of the heatRecovery input since it seems like this will also produce misleading expectations by the same logic.\n\n\n\nLastly, I am going to change the name of the modulateFlowOrTemp_ input to outdoorAirReq_. \u00a0The default will be to have no indoor air requirement as stated above but you can input either \"maximum\" or \"sum\" to have the IDF run accordingly.\n\n\n\nLet me know if this sounds good or if you have suggestions. \u00a0Updated GH file attached. \u00a0The github has the new Ideal Air Loads component. \u00a0Make sure that you have sync correctly and restart GH after updating your components.\n\n-Chris\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1233906", "name": "05_HVACIssues_CWM2.gh"}], "created_by_name": "Chris Mackey", "created_at": "March 1, 2015 at 2:11am", "created_by": "ChrisMackey", "replies": []}, {"body": "\nWhen I've used the Ideal Loads Systems in the past, it's been without Economizer and Heat Recovery (for the reasons you list), and I've created custom ventilation schedules (fan or nat vent) to account for the actual building economizer and/or ventilation (as you discuss). \u00a0The problem with this method is that it is impossible to get the setpoints and schedules just right so that the Ideal Loads System doesn't end up working too hard either on the heating or cooling end of things.\u00a0\n\n\n\nWhen I saw the Ideal Loads System component in HB I got excited because I thought you'd solved the economizer \"problem.\" \u00a0It threw me for a loop when I didn't see the economizer impact the cooling energy use, but I think you're correct that the Ideal Loads System is just reporting sensible + latent heat in/out. \u00a0That said, I have the suspicion that there must be a way of breaking out the economizer \"energy savings\" or the EPlus developers wouldn't have included this option in the component. \u00a0Same with heat recovery. \u00a0I'll do a little bit of research in the EPlus documentation and then test your new component. \u00a0I'll try to get back to you in the next few days, but it might take more time.\n\n\n", "attachments": [], "created_by_name": "Burin", "created_at": "March 1, 2015 at 12:08pm", "created_by": "Burin", "replies": []}, {"body": "\nBurin,\n\nThanks for sticking with this problem and being committed to solving it. \u00a0I think that I have finally realized what the problem was with the original economizer. \u00a0The error was in a place that we would not expect.\n\nI was requesting the wrong cooling/heating outputs from the ideal air system. \u00a0From the image below taken from the E+ input/output reference, it seems that I should be requesting \"Zone Ideal Loads Supply Air Total Heating Energy\" instead of \"Zone Ideal Loads Zone Total Heating Energy\" (with the same situation for cooling).\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/BYH6s*jgRS9ynL-vWOLc8*94XotA24J2*VVK*-F6fvnPp2wFv7jKjBbpPAkF2SPk*8YP4dxyhSbEie6-vX3hKF8-oIGjb*4Y/EPIdealAirOutput.PNG\" width=\"629\"/>](http://api.ning.com:80/files/BYH6s*jgRS9ynL-vWOLc8*94XotA24J2*VVK*-F6fvnPp2wFv7jKjBbpPAkF2SPk*8YP4dxyhSbEie6-vX3hKF8-oIGjb*4Y/EPIdealAirOutput.PNG)\n\nMan, I swear that the E+ output names are the most confusing things that I have encountered in my coding experience thus far.\n\nI have now corrected all of the components involved with the requesting of this output and I have re-instantiated the economizer. \u00a0You now see a very big jump in cooling energy between having/not having an economizer. \u00a0Adding in the economizer now practically drops your entire cooling load to a third of its non-economizer value in San Francisco. \u00a0Also, your cooling values are now generally a lot lower (both with and without economizer) because the outdoor air requirement does a lot of cooling for you, which you are seeing now that we are requesting the right output. \u00a0If you change the outdoor air requirement to \"None\", you get values close to that originally posted at the start of this discussion.\u00a0\n\nI have changed the default conditioned HBZone to now have an economizer and have an outdoor air requirement set by \"Sum\" since, as you say Burin, that is what ASHRAE recommends. \u00a0You can still change this outdoor air input on the Set Ideal Air Loads Parameters component and I have made clear in the description that there is an assumption of demand controlled ventilation when the outdoor air is set to \"Maximum\".\u00a0 The default conditioned HBZone does not have heat recovery but it seems to be working correctly now that we are requesting the right output.\n\nThanks again for sticking with this, Burin, and let me know if the attached GH file makes sense.\n\n-Chris\n\n\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1234885", "name": "05_HVACIssues_CWM3.gh"}], "created_by_name": "Chris Mackey", "created_at": "March 2, 2015 at 3:31pm", "created_by": "ChrisMackey", "replies": []}, {"body": "", "attachments": [], "created_by_name": "Burin", "created_at": "March 7, 2015 at 6:03pm", "created_by": "Burin", "replies": []}]}], "id": "1229923"}