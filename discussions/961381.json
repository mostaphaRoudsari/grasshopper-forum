{"body": "\nHi Mostapha,\n\nSee attached. Trying, after the thread in the Comment section, to build a simple example for view analysis.\n\nI get this error:\n\n1. Solution exception:global name 'viewPoints' is not defined\n\nAnd don't know how to move forward. It is strange. Before this error i get another one related to (unfortunately didn't copied the error and now can't reproduce) \"JoinMesh\". After this one i input a new ViewAnalysis component and then the error shifted to ViewPoints.\n\nThe Ladybug is flying free :-)\n\nAny ideas?\n\n\n\nThanks,\n\n-A.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A961380", "name": "ViewAnalysis_01.gh"}], "created_by_name": "Abraham Yezioro", "created_at": "November 21, 2013 at 2:29am", "created_by": "AbrahamYezioro", "topic": "View Analysis", "replies": [{"body": "\nHi Abraham,\n\nThere should be a reason that I always release the view analysis with a bug! I forgot an underline.\n\ncustomHeading = '\\n\\nView Analysis' + '\\n#View Points = ' + `len(****_****viewPoints)`\n\n\n\nNow it is fixed and running. I will update the source code and the download link shortly:\n\n\n\n[<img class=\"align-center\" src=\"http://api.ning.com:80/files/1Q*fTOyGxICOXIl0WjUcj-5zmVGreDIUzLiBtFFD6*CbylFdTzT-0cLxsH5AvSuHvuahV9O*RaWj*YSYnen98tDox8-yXdi2/viewAnalysis_02.png?width=650\" width=\"650\"/>](http://api.ning.com:80/files/1Q*fTOyGxICOXIl0WjUcj-5zmVGreDIUzLiBtFFD6*CbylFdTzT-0cLxsH5AvSuHvuahV9O*RaWj*YSYnen98tDox8-yXdi2/viewAnalysis_02.png)\n\n\n\nWhenever you get an error that says \"lb_preparation has no method called joinMesh\" it means there is an older version of ladybug flying on your system. You just need to let the new Ladybug fly to overwrite the old version! :)\n\n\n\nThanks,\n\nMostapha\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A961298", "name": "viewAnalysis_02.gh"}], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "November 21, 2013 at 6:02am", "created_by": "MostaphaSadeghipour", "replies": [{"body": "\nFunny :-)\n\nThanks.\n\nIs there a way to get the % for each of the points, instead of the weighted %?\n\n\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "November 21, 2013 at 6:41am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nSure thing! Leave the viewPtsWeights input empty and\u00a0viewStudyResult output should give you that for each test point.\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "November 21, 2013 at 6:44am", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nHmmm ...\n\nI meant that for each of the viewing points i want to know the % average they see the Geometry. The ViewResult shows the % for each patch on the geometry. The AverageView is giving only one value (even when i disconnected the viewPtsWeights.\n\n\n\nThanks,\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "November 21, 2013 at 7:02am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nHi Abraham,\n\nI see your point now. You are changing the test point and the target points in your question. Pretty interesting indeed! I've never thought of it this way! [I feel stupid now! Hahaha. Of course you should be able to so this.] I'll modify the component later today so you can either input a point or a surface for test.\n\n\n\nEven though the component is not designed for what you are looking for, it is still possible to get what you want out of it by creating some fake test surfaces. Checked the attached file!\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/1Q*fTOyGxIC11NMxVs0O-DS-eWzyE1VmzpfZUQvqaOyiwaJzzBiv78ZcflN6RCVdG6nwl1p*D2T28dCj-S8FoBCwG8LIbTVI/viewAnalysis_03.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/1Q*fTOyGxIC11NMxVs0O-DS-eWzyE1VmzpfZUQvqaOyiwaJzzBiv78ZcflN6RCVdG6nwl1p*D2T28dCj-S8FoBCwG8LIbTVI/viewAnalysis_03.png)\n\nMostapha\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A961480", "name": "viewAnalysis_03.gh"}], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "November 21, 2013 at 8:21am", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nStill funny :-)\n\nWell. This is not what i meant at all but the results is the same. When i said \"point\" i always intended them to be the ViewPoints, as in the component. Now, you check if you see from each of those point a Geometry (say, a surface). So according to the grid size you have more or less of those. The thing a was asking is if it is possible to average those values, so i can know that viewPoint1 sees 80% of the geometry. What you did above gives the value but \"backwards\". I think it should be simpler to average the values (less work for you, i suppose ..., right?).\n\nI think, but not sure, that you are doing something like this in the averageView output, but for all ViewPoints. I'm asking for this but for each VP.\n\n\n\nI'm getting messy in this one.\n\nThanks,\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "November 21, 2013 at 9:11am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nThanks for the comment. It reminded me that I actually considered this! I added an output to viewAnalysis component (\"ptIsVisible\") at the last minute to let the users do stuff like this. :)\n\nIt is similar to intersectionMtx: A list of 0s and 1s that shows if the test point is visible. You need to flip the matrix and count the number of 1s and divide it by the length of the list. Here is how you can set it up:\n\n[<img class=\"align-center\" src=\"http://api.ning.com:80/files/1Q*fTOyGxIDiE74v78RAOg9yD9gBj*gbrTSCcrpaYPTrXuWmtyHNP7-Qe0263k6ieKbo3QLuXjwoip7aubQmHGM7ZHapzXfk/viewAnalysis_04.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/1Q*fTOyGxIDiE74v78RAOg9yD9gBj*gbrTSCcrpaYPTrXuWmtyHNP7-Qe0263k6ieKbo3QLuXjwoip7aubQmHGM7ZHapzXfk/viewAnalysis_04.png)\n\nThe result is 1% different from the last example. I think it happens because the test points are not exactly the same.\n\nHopefully I get it right this time! :)\n\nMostaphaMostapha\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A961582", "name": "viewAnalysis_04.gh"}], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "November 21, 2013 at 12:17pm", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nAnd this is really it!!! Great and thanks!!\n\nIn your \"spare\" time please explain the logic of the viewPtsWeights. I don't get it. When all are 0 you get the average (~78 in this case), when all 1 i thought you should get the same ... but i'm not. I get 100 (probably because one of the VP sees 100%).\n\nSorry to be such a pain today ...\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "November 21, 2013 at 2:07pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nNice! No problem. Thank you for bringing it up.\n\nWeights define the importance of the view point. Just an input to give some freedom to user to use the component as they wish.\n\nLet's say you are testing for 4 viewPoints. In that case normally each viewPoint has the importance of 1/4 (25%), however in some cases you want to consider 100% view if you can see any of the points. You can use the weights input in cases similar to this. If you put 1 as the weight you are telling the component that if a testPoint sees this point it has 100% view. There is no true or false method in assigning the weights. It is all about your definition of view.\n\nHope it explains the idea to some extents. I owe you a video on this anyways! :)\n\nMostapha\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "November 22, 2013 at 6:15am", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nHi Mostapha,\n\nThanks for the explanation. I'll let you rest on this one ... for now :-). Mainly because it is not so critical.\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "November 22, 2013 at 7:48am", "created_by": "AbrahamYezioro", "replies": []}]}], "id": "961381"}