{"body": "\nI still got similar error as the one reported in a [previous pos](http://www.grasshopper3d.com/group/ladybug/forum/topics/split-building-mass-component-error)t when using the split mass components to deal with several particular group of floor surfaces.\n\n\n\nThe building zone for each floor is created by extruding the floor surface. However, there are always thermal zones missing in the result. The component even reports error in the second case.\n\n\n\nMay I ask if this is caused by the floor surfaces that are not properly prepared, or due to the limitation of the split mass component itself?\n\n\n\nAppreciate your advice!\n\n\n\n- Ji\n\n\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/w9vi0ysetDocCeMkSnLngsw2QsiiBXSVYUPkGQPxi1WneKXziM3Hh7TDX5Xd9*pYPl1Gt2kv4tULCfaFFYLTso3AFssZeYsd/Image1.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/w9vi0ysetDocCeMkSnLngsw2QsiiBXSVYUPkGQPxi1WneKXziM3Hh7TDX5Xd9*pYPl1Gt2kv4tULCfaFFYLTso3AFssZeYsd/Image1.png)[<img class=\"align-full\" src=\"http://api.ning.com:80/files/w9vi0ysetDq0DQKabYqZ5yXTb55BzM1bi534ziMni8DMiBw0edeQjSoZSBUuFp68lDYUbmFqg2rWn04gnJFROQovddrkFSqC/Image3.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/w9vi0ysetDq0DQKabYqZ5yXTb55BzM1bi534ziMni8DMiBw0edeQjSoZSBUuFp68lDYUbmFqg2rWn04gnJFROQovddrkFSqC/Image3.png)[<img class=\"align-full\" src=\"http://api.ning.com:80/files/w9vi0ysetDqtQjtI4Hi7JExVvkBQPEOlPQ*7vjhgh-Q154dgy31-KNuwS3H*4*qSkNOvjfpD-wMX2lBmJQU2*C1H0sYQnwxn/Image4.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/w9vi0ysetDqtQjtI4Hi7JExVvkBQPEOlPQ*7vjhgh-Q154dgy31-KNuwS3H*4*qSkNOvjfpD-wMX2lBmJQU2*C1H0sYQnwxn/Image4.png)[<img class=\"align-full\" src=\"http://api.ning.com:80/files/w9vi0ysetDqppwSbYVx*feo-KG*87ZSIuGZVAfKgpbuijR8k*HkCeO0NfVandNXZjCf5zeQJUcRQIgGwr53N0Jb3EExIQ*EQ/Image5.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/w9vi0ysetDqppwSbYVx*feo-KG*87ZSIuGZVAfKgpbuijR8k*HkCeO0NfVandNXZjCf5zeQJUcRQIgGwr53N0Jb3EExIQ*EQ/Image5.png)\n\n\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1626417", "name": "splitBuildingMass issue.gh"}], "created_by_name": "Grasshope", "created_at": "October 26, 2016 at 9:25am", "created_by": "Grasshope", "topic": "split building mass component error, again", "replies": [{"body": "\nHi Grasshope, I'm pretty sure this is the component.\u00a0\n\nI'm also having a lot of issues with it, and have been trying to revise some of the code with Chris:\u00a0[https://github.com/mostaphaRoudsari/Honeybee/issues/497](https://github.com/mostaphaRoudsari/Honeybee/issues/497) . Thanks for providing these gh files isolating edge cases causing errors, they do help. I'll try and dedicate some time to look at this during the weekend.\n", "attachments": [], "created_by_name": "Saeran Vasanthakumar", "created_at": "October 27, 2016 at 8:43pm", "created_by": "SaeranVasanthakumar", "replies": [{"body": "\nHi Saeran, Thank you very much for the update! Really appreciate your kind help to tackle this issue!\n\n- Ji\n", "attachments": [], "created_by_name": "Grasshope", "created_at": "October 27, 2016 at 11:11pm", "created_by": "Grasshope", "replies": []}, {"body": "\nSo I believe I've caught what was causing 90% of the problem - an equality condition for certain floor heights getting triggered inaccurately due to the limitations of floating point precision. There are still errors happening when we're cutting the core/perimeter floors, but this initial fix should take care of all your issues with floor heights at the least.\u00a0\n\n\n\nI'm going to make a pull request with the fix, in the meantime here's a file with the new SplitBuildingMass components that are being developed, that addresses most of your issues.\u00a0\n\n\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1628920", "name": "split4test_1.gh"}], "created_by_name": "Saeran Vasanthakumar", "created_at": "October 29, 2016 at 7:01pm", "created_by": "SaeranVasanthakumar", "replies": []}, {"body": "\nThank you Saeran! \u00a0You bug fix has been merged in. \u00a0Great job!\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "October 30, 2016 at 11:01pm", "created_by": "ChrisMackey", "replies": []}, {"body": "\nThank you very much, Saeran!\n\nAs you mentioned, some of the issues remain to be tackled with this update ...\n\n\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/VQvbBACfG9rWhaEuKY7LrRLh4bCqRJNfBlc3PgsA7nteiHGMvVN*0YeLrEekXdae1QGsooZHfu24ht9D45VeKu8QG8c8Q15c/Image004.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/VQvbBACfG9rWhaEuKY7LrRLh4bCqRJNfBlc3PgsA7nteiHGMvVN*0YeLrEekXdae1QGsooZHfu24ht9D45VeKu8QG8c8Q15c/Image004.png)[<img class=\"align-full\" src=\"http://api.ning.com:80/files/VQvbBACfG9qsHx7j8pO4gY5vI0bC4t3jcAyNfwUTJ9JII-sAlIhjGIzMU1QWzSOo8cicnJ*JMeD8FVTA2u15o4P5YYSrby53/Image005.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/VQvbBACfG9qsHx7j8pO4gY5vI0bC4t3jcAyNfwUTJ9JII-sAlIhjGIzMU1QWzSOo8cicnJ*JMeD8FVTA2u15o4P5YYSrby53/Image005.png)[<img class=\"align-full\" src=\"http://api.ning.com:80/files/VQvbBACfG9pNZ73dEimXhIvhVgtHfj*PPCxFLc6AdpaYimSLbaNO*vNj1qcMSnu1OhfmF9BsBNuMPad1J5IQ1l6cQyLaZgoQ/Image006.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/VQvbBACfG9pNZ73dEimXhIvhVgtHfj*PPCxFLc6AdpaYimSLbaNO*vNj1qcMSnu1OhfmF9BsBNuMPad1J5IQ1l6cQyLaZgoQ/Image006.png)[<img class=\"align-full\" src=\"http://api.ning.com:80/files/VQvbBACfG9oXDp257v0qBMgEy2VgRqLPvvxCqEjFEXb19zz2SCfh5t0YHukLPOFjEGH0Pi6-9RE7WHSl7VSaTGLPaCTIw59*/Image007.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/VQvbBACfG9oXDp257v0qBMgEy2VgRqLPvvxCqEjFEXb19zz2SCfh5t0YHukLPOFjEGH0Pi6-9RE7WHSl7VSaTGLPaCTIw59*/Image007.png)\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1630395", "name": "splitBuildingMassissue_V2.gh"}], "created_by_name": "Grasshope", "created_at": "November 2, 2016 at 12:07am", "created_by": "Grasshope", "replies": []}, {"body": "\nYeap, it should be cutting the floor heights consistently now, but something is occurring in the second function: deriving the perimeter and core geometries, that's causing certain floors to fail. This appears to be a different problem that I'm hoping to address when I have the time.\u00a0\n\n\n\nS\n", "attachments": [], "created_by_name": "Saeran Vasanthakumar", "created_at": "November 2, 2016 at 3:07pm", "created_by": "SaeranVasanthakumar", "replies": []}, {"body": "\nThank you very much, Saeran! - Ji\n", "attachments": [], "created_by_name": "Grasshope", "created_at": "November 5, 2016 at 10:04am", "created_by": "Grasshope", "replies": []}]}], "id": "1626418"}