{"body": "\nThe attached workflow generate 10 random zones in a fix 3D grid.\n\n\n\nSometimes, the zones generated sometimes can be processed by the **intersectMass** correctly:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/DfCm7EeUxj5L185WHIuGdlvXE-z7TVOre6sVbPRWEQv1iRtjbnKb3QZxSI8ANG*LC7UjYCk5X4SIFnmWt4Aw4p0aZa4gHH96/Image4.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/DfCm7EeUxj5L185WHIuGdlvXE-z7TVOre6sVbPRWEQv1iRtjbnKb3QZxSI8ANG*LC7UjYCk5X4SIFnmWt4Aw4p0aZa4gHH96/Image4.png)\n\n\n\nHowever, After changing the seed of the random function, some of the breps generated cannot be processed by **intersectMass** and a warning is shown:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/DfCm7EeUxj6amyfZToATkDdSeaAHOLULnFWgQ1SG-tfYrgdyk1X5PD1Dv85w0itQxrKf*sxJItN8mxIHvdu9qRcxS-7pm0-o/Image5.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/DfCm7EeUxj6amyfZToATkDdSeaAHOLULnFWgQ1SG-tfYrgdyk1X5PD1Dv85w0itQxrKf*sxJItN8mxIHvdu9qRcxS-7pm0-o/Image5.png)\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/DfCm7EeUxj6HL7Em2*ACwaAIceaeHKLQpkcksIUbo5geqxhEpZpHiFqAVNbnW8pxQiCn7WLpKIyxzUlkvhPotG1qJ26N*bSp/Image2.png?width=750\" width=\"750\"/>](http://api.ning.com:80/files/DfCm7EeUxj6HL7Em2*ACwaAIceaeHKLQpkcksIUbo5geqxhEpZpHiFqAVNbnW8pxQiCn7WLpKIyxzUlkvhPotG1qJ26N*bSp/Image2.png)\n\n\n\nAnother strange thing is that the warning on **intersectMass** is not consistent, i.e. the same group of breps sometimes can be processed, and sometimes not ... And I'm sure it's not the problem of the breps.\n\n\n\nAppreciate your kind advice on this issue which is quite blizzard ...\n\n\n\nThanks.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1740239", "name": "intersectMass issue _v01.gh"}], "created_by_name": "Grasshope", "created_at": "April 26, 2017 at 9:49am", "created_by": "Grasshope", "topic": "intersectMass component is unable to process normal breps and the warning is inconsistent", "replies": [{"body": "\nHi Ji,\n\nWhy don't you connect directly the brep component to the HB_Mass2Zone? This works fine.\n\nThe boxes you create don't intersect between them. They have only a common face. I assume that this is what confuses the HB_IntersectMass.\n\nOf course, i assume each box will be an independent zone and you don't want to make combinations of boxes into 1 zone.\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "April 26, 2017 at 10:56am", "created_by": "AbrahamYezioro", "replies": [{"body": "\nSee file ...\n\n-A.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1740152", "name": "intersectMassissue_v01_AY.gh"}], "created_by_name": "Abraham Yezioro", "created_at": "April 26, 2017 at 12:23pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nThank you, Abraham.\n\n\n\nMy main concerns are:\n\n1. the intersectMass component shouldn't give a warning for breps with no **partially overlapping** surfaces\n\n2. the warning is not given in a consistent manner.\n\n\n\nWe can bypass the intersectMass component in this particular case, but we still need to use it in other workflow in which large amount of input breps may or may not have partially overlapping surfaces. It will not be efficient if we have to manually bypass intersecMass for particular cases it cannot handle.\n", "attachments": [], "created_by_name": "Grasshope", "created_at": "April 26, 2017 at 8:41pm", "created_by": "Grasshope", "replies": []}, {"body": "\nStill don't get why you need the intersect mass. Your case doesn't allow intersection. At most, face overlapping. That's why what i sent works fine.\n\nAnyway, i was curious of your comment, and started testing if it has to do with tolerance units ... it is not. The thing is that when i open your file the intersectMass is ok. But when i move the seed slider it always turn orange. Even for the original seed. But the most interesting thing is that if i recompute the file it works fine for all cases. From this i have the suspicion that something remains in memory, from previous checkings, that needs to be cleaned. The error/warning is the one in line 257 (if Hzones == True).\n\nHere probably Chris will have a more educated answer.\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "April 26, 2017 at 9:47pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nYes, Abraham, this is exactly the problem I encountered. Apologize that I didn't explain it clearly in my original post.\n\n\n\nFollowing your advice, I did some more tests:\n\n\n\n1. If the **mass2Zone** component is not imported in the workflow, there is no problem for the **intersectMass** component, no matter how we change the random seed to generate different groups of breps with overlapping surfaces:\n\n\n\n2. However, once we add the **mass2Zone** component into the workflow, we have this problem as posted here.\n\n\n\n3. As you pointed out, the warning is given when \"Hzones == True\" which only happens when one of the objects in _**bldgMassesBefore** is recognized as a **zone** already stored in **HB Hive**. So, I added one line after line257 to **print out the zone name:**\n\n**[<img class=\"align-full\" src=\"http://api.ning.com:80/files/M-kC1yhXlFKuHJCuaIbeLw9PcMf2mn2jnwXhDIt0AiZ85GJBbjCal0q1256gt0ObWF1x0hUn1IEmNf*zcRw09rtPinPelyoz/Image16.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/M-kC1yhXlFKuHJCuaIbeLw9PcMf2mn2jnwXhDIt0AiZ85GJBbjCal0q1256gt0ObWF1x0hUn1IEmNf*zcRw09rtPinPelyoz/Image16.png)**\n\n\n\n4. It seems for the cases that the intersecMass component shows warning, there is a zone name printed:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/M-kC1yhXlFJKIj68zKgVbqOT-cKxjXIz39eXjulo3POHnwbYr*a*XsXPulJ82ysW0*u2hPsnmeo7gsA5OHcNvt4eT5xExpqI/Image20.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/M-kC1yhXlFJKIj68zKgVbqOT-cKxjXIz39eXjulo3POHnwbYr*a*XsXPulJ82ysW0*u2hPsnmeo7gsA5OHcNvt4eT5xExpqI/Image20.png)\n\n\n\n5. Whereas for those cases that the intersecMass component shows no warning, there is no zone name printed:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/M-kC1yhXlFKfGG1c0lvMP6YhNMXPaaoYs8qAvNoNmCB4XVtdgoZ6*tDXWwpGNCs7P7Y9QHXzD4pe7Ioy3BK79sek4WQfGT2R/Image21.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/M-kC1yhXlFKfGG1c0lvMP6YhNMXPaaoYs8qAvNoNmCB4XVtdgoZ6*tDXWwpGNCs7P7Y9QHXzD4pe7Ioy3BK79sek4WQfGT2R/Image21.png)\n\n\n\n6. Even if the **zone creation is turned off**, there is still zone name printed for cases that intersectMass is unable to process:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/M-kC1yhXlFKAh-HeimLN7ml5cKn58ZpYQyyjwXYXIc1m81fxJZhwk559KUrfZvSeK2GEE8DGfZ4itMpxLNpry1bX58HfN3NF/Image22.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/M-kC1yhXlFKAh-HeimLN7ml5cKn58ZpYQyyjwXYXIc1m81fxJZhwk559KUrfZvSeK2GEE8DGfZ4itMpxLNpry1bX58HfN3NF/Image22.png)\n\n\n\nSo, I agree with you that this might be related to the **HoneyBeeHive** which stores honeybee zones.\n\n\n\nMaybe whenever upstream geometries change that are connected to either intersectMass or Masses2Zones, the HoneyBeeHive has to be cleaned up and zone objects inside need to be recreated.\u00a0\n\n\n\nHope Chris and Mostapha can kindly take a look and advise if this is the source of the issue.\n\n\n\nThanks.\n\n- Ji\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1740640", "name": "intersectMassissue_v02.gh"}], "created_by_name": "Grasshope", "created_at": "April 27, 2017 at 3:32am", "created_by": "Grasshope", "replies": []}, {"body": "\nI can add that the index of the names printed is increasing each time, so i'm betting on a memory storage issue.\n\nAlso if you set the Mass2Zone to False, or disable it, and recompute the IntersectMass works fine (no warnings).\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "April 27, 2017 at 3:52am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nYes, Abraham, disable Mass2Zone and recompute the workflow can solve this issue.\n", "attachments": [], "created_by_name": "Grasshope", "created_at": "April 28, 2017 at 2:45am", "created_by": "Grasshope", "replies": []}, {"body": "\nMay I ask if this error related to the intersectMass component and zone memory storage management as pointed out by Abraham has been checked and verified?\n\n\n\nThanks.\n\n- J.\n", "attachments": [], "created_by_name": "Grasshope", "created_at": "June 18, 2017 at 8:14pm", "created_by": "Grasshope", "replies": []}]}]}