{"body": "\nHi Everyone!\n\n<br/> I\u2019m quite new to Ladybug and Honeybee so I\u2019m writing this post in order to be helped and maybe learn something more about these wonderful tools. <br/> I\u2019m doing for my master thesis in architecture some analysis about outdoor comfort, comparing simultaneously the results of PET PMV and UTCI indices. I didn\u2019t have problem to evaluate the last two ones (PMV and UTCI) but I\u2019m having some problems with the evaluation of the PET index. Apart from the fact that it takes really long to be evaluated (without considering the time that has to be spent for the MRT calculation), I don\u2019t know how I could map on a mesh the estimated values like I easily do for the PMV and UTCI indices. Attached you will find the .epw and .stat files I\u2019m using for my analysis and the .gh file I was using as try. I basically used the file about the UTCI map that Chris uploaded on Hydra, where I just added the two components I used to evaluate the PET and PMV indices. <br/> I hope I was clear enough. Probably it's just some mistake of mine and the solution is easier than I expect, but I wanted to share this problem with you all hoping you can help me.<br/> <br/> Francesco\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1521930", "name": "PMV UTCI PET.gh"}, {"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1521931", "name": "ITA_Napoli-Capodichino.162890_IGDG.stat"}, {"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1521932", "name": "ITA_Napoli-Capodichino.162890_IGDG.epw"}], "created_by_name": "Francesco Scarpati", "created_at": "May 3, 2016 at 1:12pm", "created_by": "FrancescoScarpati", "topic": "PET evaluation problem", "replies": [{"body": "\nHi Francesco,<br/><br/>As it names says, the \"Thermal Comfort Indices\" covers a couple of thermal comfort indices. Some of them are dependent on solar radiation, meaning they require a particular HOY_ to be defined.<br/>So when you choose the \"PET\" index to be calculated, and when you supply a single value to each of the \"Thermal Comfort Indices\" inputs, the component still does not know for which particular hour do you want it to calculate the chosen index for.<br/>I replicated the same averaging method you used for other weather data to calculate the average HOY.<br/>You also forgot to supply the data to the \"analysisPeriod_\" of the \"Wind speed calculator\" component.<br/>As for the PET index taking longer to calculate than UTCI: it's because PET incrementally calculates the heat flow through convection, radiation, transpiration, skin wetness... for each PET value, while \"Outdoor Comfort Calcualtor\" component is using a pre-parameters defined version of UTCI.<br/><br/>I noticed that your area of analysis is situated in urban context with high buildings.<br/>Have in mind that in these kind of urban environments the air temperature from the airport (the weather file) might not be the same as the air temperature at your location. We still do not have the means to correct the airport one.<br/>I guess because the analysis is not meant to be actually used, but instead it's for academic purposes, you can use the airport air temperature.<br/><br/>Check the attached file.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1523962", "name": "PMVUTCIPET2.gh"}], "created_by_name": "djordje", "created_at": "May 6, 2016 at 12:28am", "created_by": "djordje", "replies": []}, {"body": "\nHi\u00a0[djordje](http://www.grasshopper3d.com/group/ladybug/forum/topic/listForContributor?user=2h2kxq6q1lacq)!\n\n<br/>Thank you for your answer and sorry for replaying just now.\n\nAs you said, the problem was the lack of HOY in the \"Thermal Comfort Indices\" component. I guessed that that was the problem, but I couldn't find the way to connect the \"ExtremeHotWeek\" output of \"importStat\" component in the previous one (I still have some problems in managing the Data Tree).<br/><br/>As regards the air temperature thing: well, as you said my work is just an academic exercise, so I don't really need to calculate very accurate values, but anyway thank you for having noticed it :)\n", "attachments": [], "created_by_name": "Francesco Scarpati", "created_at": "May 10, 2016 at 4:52am", "created_by": "FrancescoScarpati", "replies": [{"body": "\nHi Francesco,\n\nIt took me a while to answer to your question, so I it's me the one who had to apologize.\n\nWhat kind of problems do you have with the Data Tree?<br/>Is the upper attached PMVUTCIPET2.gh definition not working for you?\n", "attachments": [], "created_by_name": "djordje", "created_at": "May 10, 2016 at 4:59am", "created_by": "djordje", "replies": []}, {"body": "\nAh no, i just meant that, since I'm quite new to Grasshopper, I still have to be used to the data tree, that's why I couldn't find the solution.\u00a0<br/>Your definition works perfectly, thank you again!\n", "attachments": [], "created_by_name": "Francesco Scarpati", "created_at": "May 10, 2016 at 7:15am", "created_by": "FrancescoScarpati", "replies": []}, {"body": "\nFrancesco and Djordje,\n\n\n\nI apologize for coming so late to this discussion but I have two important pieces of information to add:\n\n\n\n1) I am going to be adding in a microclimate map recipe for PET very shortly (within the next day or two) using the PET code the Djordje added to Ladybug. \u00a0This will make it a bit easier to work with PET in the same spatial way as the other comfort metrics. \u00a0I will post back here once I finish implementing this recipe.\n\n2) We have a means of accounting for urban heat island effect and the air temperature effects of \"urban context with high buildings\" that you mention, Djordje. \u00a0The Urban Weather Generator (UWG) was built expressly for warping rural/airport EPW files based on urban morphology and materials. \u00a0It was built by a PhD student at my university using open source code from the Linux-based Town Energy Balance software. \u00a0I have built a GH interface for the UWG but I have released it under the name of another insect (Dragonfly), which is currently in beta and meant to enable the general warping of climate data to account for things such as climate change ans urban heat island, as well as linking out to other databases of climate data other than the EPW. \u00a0You can find an example file for the Urban Weather Generator here:\n\n[http://hydrashare.github.io/hydra/viewer?owner=chriswmackey&amp;for...](http://hydrashare.github.io/hydra/viewer?owner=chriswmackey&amp;fork=hydra_2&amp;id=Urban_Weather_Generator_Workflow&amp;slide=1&amp;scale=1&amp;offset=0,0)\n\nGenerally, I have found that the effect of urban heat island on urban air temperature is realitvely small in comaprsion to other things such as the variation of radiant temperature over an urban area or the effect of global warming over the next few decades.\n\n\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "May 16, 2016 at 1:08pm", "created_by": "ChrisMackey", "replies": []}, {"body": "\nFrancesco and Djordje,\n\n\n\nI am just letting you know that I finished adding in a Microclimate Map Recipe for PET:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/6XUuZcXwzdoNHBg0am9bScBA9TSzHtigTQNPa1EqkBVtGo6CdadHzR6vRK0JFvTET98ZnGo-wPkeJgCV2BMez8EbpqzU7Y1N/PETMap.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/6XUuZcXwzdoNHBg0am9bScBA9TSzHtigTQNPa1EqkBVtGo6CdadHzR6vRK0JFvTET98ZnGo-wPkeJgCV2BMez8EbpqzU7Y1N/PETMap.JPG)\n\n\n\nYou can find an example file attached. \u00a0Implementing the recipe was also a great opportunity to understand the math behind PET and I have to say that I am very impressed. \u00a0I have been so skeptical of energy balance thermal comfort models since I learned of the many shortcomings of PMV but the level of detail in this model and the exposure of the human body variables is reinvigorating my interest. \u00a0I think I will start replacing a lot of the instances where I have used PMV/SET in the past with PET.\n\n\n\nI also realize how long it must have taken to assemble all of this sophisticated code for PET, Djordje. \u00a0Thank you again for adding this into an open source platform like LB. \u00a0The world of thermal comfort will certainly be better for it!\n\n\n\n-Chris\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1531662", "name": "PET_Microclimate_Map2.gh"}], "created_by_name": "Chris Mackey", "created_at": "May 17, 2016 at 7:33am", "created_by": "ChrisMackey", "replies": []}, {"body": "\n\n", "attachments": [], "created_by_name": "Francesco Scarpati", "created_at": "May 17, 2016 at 4:02pm", "created_by": "FrancescoScarpati", "replies": []}, {"body": "\nHi Chris,<br/><br/>I am glad that the microclimate map recipe for PET has been released! Thank you for investing your time in creating it.<br/><br/>My apologies for missing the Dragonfly project.<br/>I haven't checked the Town Energy Balance, but I have no doubt that it's a valid project. Keep up the great work, and again, sorry for the misinformation.<br/><br/>The gratitude lies on behalf of the author of original Fortran PET code: Dr. Hoeppe. From my side I should thank the Fortran to C convertor.\n", "attachments": [], "created_by_name": "djordje", "created_at": "May 21, 2016 at 6:20am", "created_by": "djordje", "replies": []}]}], "id": "1521933"}