{"body": "\nHi,\n\nI'm performing thermal comfort analysis for some project.\n\nI'm trying to migrate from using the\u00a0runEnergySimulation component to exportToOpenStudio as recommended by Chris.\n\nComparing the results from using the same setting for both options i get different results. So i'm assuming that the exportToOpenStudio is adding additional default values. Otherwise i can't explain the differences, that sometimes are significant.\n\nAttached a couple of images showing the issue.\n\n\n\nThanks,\n\n-A.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1610005", "name": "runEnergySimulation.JPG"}, {"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1610006", "name": "exportToOpenStudio.JPG"}], "created_by_name": "Abraham Yezioro", "created_at": "October 3, 2016 at 11:13pm", "created_by": "AbrahamYezioro", "topic": "[Solved] ExportToOpenStudio vs runEnergySimulation - Results differences", "replies": [{"body": "\nAbraham,\n\nI know that there is a very small difference between how the two components write out the ideal air system. \u00a0Specifically, the E+ component uses a template system that is easy to add to the model but harder to size correctly. \u00a0The OpenStudio component writes out a full Ideal Air system that has more detail and is sized more robustly to handle the loads in extreme times. \u00a0It is possible that this may account for the difference.\n\nIs this a simulation that you are running with the ideal air system?\n\nIf not, I don't know of any other major differences between the two except that the OpenStudio component has an implementation of daylight controls that shouldn't affect anything since it is turned off by default. \u00a0In this case of not having an ideal air system, upload the gh file (no matter how large) and we will get to the bottom of the difference.\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "October 4, 2016 at 6:56am", "created_by": "ChrisMackey", "replies": [{"body": "\nHi Chris,\n\nI checked a bit more thoroughly. This happens with both conditioned and unconditioned models.\n\nI'm attaching the unconditioned example (needs the 3dm also. Sorry for not internalising).\n\nDisable the solver before opening. It can take a while to run.\n\nAlso attached the IDF files created by each component. The differences are minimal ... if any, so i can't explain the differences.\n\nAny thoughts?\n\nThanks,\n\n-A.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1610774", "name": "munot o - A1_Clean.3dm"}, {"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1610775", "name": "E+.idf"}, {"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1610776", "name": "munot o - A1 - 15.09.16 - ASHRAE-EU_AY_Updt.gh"}], "created_by_name": "Abraham Yezioro", "created_at": "October 4, 2016 at 1:51pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAnd the OS idf file.\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1610856", "name": "OS.idf"}], "created_by_name": "Abraham Yezioro", "created_at": "October 4, 2016 at 1:52pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAbraham,\n\n\n\nIt was just too difficult to test anything with your file but I was able to\u00a0 replicate the issue with a smaller model and simpler GH file.\u00a0 I got the OpenStudio component giving far worse comfort than the E+ component even though the average temperatures were similar:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/99aVnO*4LGeX4QOTPc-*hFkR8XNwvStEJeBmfes0BEjnchs8LEgFmUOv4y82jbYMBDAibiyU2nQgcISi0wks78Gb13cFvagg/DifferentAdaptComf.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/99aVnO*4LGeX4QOTPc-*hFkR8XNwvStEJeBmfes0BEjnchs8LEgFmUOv4y82jbYMBDAibiyU2nQgcISi0wks78Gb13cFvagg/DifferentAdaptComf.JPG)\n\n\n\nIt turns out that it was not the known difference in ideal air system between the components (swapping out the ideal air template into the OpenStudio file did not affect the results).\u00a0 Rather, it was a bug in the OpenStudio component that was causing incorrect default constructions to be written for some of the surfaces.\u00a0 I think your case wasn't affected as much because you are overriding a lot of the default constructions.\u00a0 I fixed this bug here:\n\n[https://github.com/mostaphaRoudsari/Honeybee/commit/6b185b5c8b7d9b1...](https://github.com/mostaphaRoudsari/Honeybee/commit/6b185b5c8b7d9b1ed5aad381852c16c473dc6308)\n\nAnd I now get results that match very closely.\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/99aVnO*4LGcieSMrwTMtfukpPWqNfxNi8GfQmX2nhqK0oLqugswCHZuSBmhLodzNve27h0OmyE7vsRs5tBikLKvphz0w53Q4/ComfResultsMatching.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/99aVnO*4LGcieSMrwTMtfukpPWqNfxNi8GfQmX2nhqK0oLqugswCHZuSBmhLodzNve27h0OmyE7vsRs5tBikLKvphz0w53Q4/ComfResultsMatching.JPG)\n\n\n\nLet me know if updating your components fixes your issue, Abraham.\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "October 7, 2016 at 3:32pm", "created_by": "ChrisMackey", "replies": []}, {"body": "\nHi Chris,\n\nThanks. It looks good ... for your example. Unfortunately for mine the differences remain the same as in the original message. I mean, no changes with the updated component (6 October).\n\nI tested the surfaces temperatures for both E+ and OS. there are differences of 1 degree in the minimal and 0.5 in the maximal scale of the legend for the typical weeks (hot and cold). As i said before, comparing both IDF files they are pretty much the same, except for the ScheduleTypeLimits, where the E+ writes 91 objects and the OS only 8-9. Also the OS writes some Schedule:Week:Daily and Schedule:Daily:Interval for Warehouses and they are used for the calculations. Needless to say that i defined for all zones MidriseApartment program.\n\nAdditionally, you are right. I defined almost any possible value, so practically no defaults were left to be used.\n\nLast thing, I understand that both components run EnergyPlus 8.5 installed in the OpenStudio installation directory. I don't have installed 8.5 besides that. Is this right?\n\nAny suggestions?\n\nThanks again,\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "October 8, 2016 at 10:46am", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAbraham,\n\nThe warehouse schedule difference sound suspicious (do you know where in your script these are being defined?)\n\n\n\nIf it's not this, then the only significant difference is the ideal air system. \u00a0Can you check with the new EIO component to see if the size of your ideal air system is very different for the two simulations. \u00a0This discussion includes an image of how to do this:\n\n[http://www.grasshopper3d.com/group/ladybug/forum/topics/heating-and...](http://www.grasshopper3d.com/group/ladybug/forum/topics/heating-and-cooling-loads)\n\nYou might just want to oversize both systems a lot (using EPSimPar) to ensure that all setpoints are always met.\n\n\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "October 8, 2016 at 3:35pm", "created_by": "ChrisMackey", "replies": []}, {"body": "\nHi Chris,\n\nI don't define anywhere something related to Warehouses. I strictly defined each zone as MidriseApartment. You can see in this image where this is happening in the script:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/vXmFHq1ldXD56G2zCPdMomG8uHQorQu6UNDF6m8PkZ-yAt1XlnX5Gjpm7LtGX7FV9OWl4Tq86ZDqsmeKAxQxdks-IX1-YMhX/Capture.JPG\" width=\"331\"/>](http://api.ning.com:80/files/vXmFHq1ldXD56G2zCPdMomG8uHQorQu6UNDF6m8PkZ-yAt1XlnX5Gjpm7LtGX7FV9OWl4Tq86ZDqsmeKAxQxdks-IX1-YMhX/Capture.JPG)\n\nAs for the schedules, also this image shows where i'm defining/assigning all of them:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/vXmFHq1ldXDMh*jmjEpEmSr16QYM8tThJzQoHugHpEFY58v87LB8NS-eW5emwSxnvb9P6RvgcLaJaULwW2UWUHCOEsfyeadL/Schedules.JPG\" width=\"482\"/>](http://api.ning.com:80/files/vXmFHq1ldXDMh*jmjEpEmSr16QYM8tThJzQoHugHpEFY58v87LB8NS-eW5emwSxnvb9P6RvgcLaJaULwW2UWUHCOEsfyeadL/Schedules.JPG)\n\nBTW, the warehouse stuff appears ONLY in the exportToOpenStudio option.\n\n\n\nFinally, i'm not conditioning the zones. Explicitly i asked to set the isConditioned_ input in the HB_createHBZones to False. The discussion you mentioned approaches this differently oversizing the heating/Cooling so you never need the AC. The IDF created don't have any definition of IdealSystems, so i don't believe this is the problem. If you want to see the IDF files you can see them above (attached in a previous message).\n\nWeird ...\n\nThanks,\n\n-A.\n\n\n\n\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "October 8, 2016 at 9:43pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAbraham,\n\nI checked and the warehouse schedules are not being used at all even though they are being written (so that is not it). Much of the differences in the way the schedules are written seems to do with the fact that OS does not support CSV schedules and so we have to write these in after IDF translation. \u00a0I'm trying to test your GH file but I'm getting errors from the simulation:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/AxtJ5-qvacZR1nEyH542fBc2EXAYodhqXeEy4oNmFtag0tqqRKwWinLZDk-xxprJ4*ccqtikEAUt-UssWC-DUKKA7ta41wTL/OSError.jpg?width=721\" width=\"721\"/>](http://api.ning.com:80/files/AxtJ5-qvacZR1nEyH542fBc2EXAYodhqXeEy4oNmFtag0tqqRKwWinLZDk-xxprJ4*ccqtikEAUt-UssWC-DUKKA7ta41wTL/OSError.jpg)\n\nThis really seems to be too complex of a model for me to separate honeybee code issues from the energy modeling issues.\n\n\n\nThe best I can offer if you are able to run your model on your machine without errors is to try producing [an energy balance graphic](http://hydrashare.github.io/hydra/viewer?owner=chriswmackey&amp;fork=hydra_2&amp;id=Energy_Balance&amp;slide=0&amp;scale=1&amp;offset=0,0)of the two models and see if there is one specific term that is out of order. \u00a0This will at least give us a place to start looking.\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "October 9, 2016 at 9:14pm", "created_by": "ChrisMackey", "replies": []}, {"body": "\nHi Chris,\n\nSo you gave me some homework and i did it :-)\n\nThere are differences, some of them big, specially with NaturalVentilation and Storage results:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/AxtJ5-qvacYGuodV6TQUekAwzehszCtMV59Q49MJbup1bkWb1OI70NRWxABK94yP*JgflgaWCgiHIjb-NpbjlHX1OzflMRPD/Capture.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/AxtJ5-qvacYGuodV6TQUekAwzehszCtMV59Q49MJbup1bkWb1OI70NRWxABK94yP*JgflgaWCgiHIjb-NpbjlHX1OzflMRPD/Capture.JPG)And the summary of the differences are (i left only those that are significant):\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/AxtJ5-qvacZsDUD24A5b9VQTHATm4fL5ImIL7DFSBIUFaEIcDkvcl*YBtvA2o9AUUQw5y2BCRiyriPd3uGGsoeyQfRe*8gsR/Difference.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/AxtJ5-qvacZsDUD24A5b9VQTHATm4fL5ImIL7DFSBIUFaEIcDkvcl*YBtvA2o9AUUQw5y2BCRiyriPd3uGGsoeyQfRe*8gsR/Difference.JPG)\n\nAs you see, naturalVentilation is giving higher loses in the OS option.\n\nAttached also an excel with all the data. Maybe it will help.\n\nIs this useful for debuging?\n\n\n\nThe error of the simulation is related to non-convex surfaces. Is severe but the simulation runs. I need to check where is (are) the bad surface and correct it.\n\n-A.\n\n\n\n\n\n\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1614972", "name": "Compare_EnergyBalance.xlsx"}], "created_by_name": "Abraham Yezioro", "created_at": "October 9, 2016 at 11:29pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAbraham,\n\nThis is great and thank you for doing the homework :). \u00a0At least now we know now that the issue seems to be with the natural ventilation since the other terms are looking really similar. \u00a0The storage term is just computed as the remainder of the other terms (to make the energy balanced) so it is really only reflecting the difference in the natural ventilation between the two simulations.\n\nLet me see if I can re-create this difference on a small scale and, hopefully, this will then fix your issue.\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "October 16, 2016 at 11:20am", "created_by": "ChrisMackey", "replies": []}, {"body": "\nAbraham,\n\nI unfortunately can't seem to replicate the error on a small scale. \u00a0I'm getting results that match perfectly:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/7AULtQmLSn3TEXukR-zJKPAcq0aZKW6oooMDauDhGdB7v7XiN97QdfLKVNIcKJSNYzHJ*ga4Kib1hvsgkqr41R0bZ*e0A8Wd/TrytoRecreateNatVentError.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/7AULtQmLSn3TEXukR-zJKPAcq0aZKW6oooMDauDhGdB7v7XiN97QdfLKVNIcKJSNYzHJ*ga4Kib1hvsgkqr41R0bZ*e0A8Wd/TrytoRecreateNatVentError.JPG)\n\n-Chris\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1619606", "name": "TryToRecreateNatVentError.gh"}], "created_by_name": "Chris Mackey", "created_at": "October 16, 2016 at 11:54am", "created_by": "ChrisMackey", "replies": []}, {"body": "\nAbraham,\n\nI took another look at your file and realized that you are also not setting up the nat vent component so well. \u00a0If you use the nat vent specifications that I have in the previous file that I attached, let me know if you get comparable results.\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "October 16, 2016 at 11:58am", "created_by": "ChrisMackey", "replies": []}]}]}