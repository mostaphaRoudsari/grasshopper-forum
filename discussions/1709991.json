{"body": "", "attachments": [], "created_by_name": "Mike Johnson", "created_at": "March 11, 2017 at 10:23pm", "created_by": "MikeJohnson", "topic": "Radiation analysis without epw weather file", "replies": [{"body": "\nHi Mike,\n\nYou can generate epw files with\u00a0[meteonorm](http://www.meteonorm.com/).\n\nbest,\n\nOmid\n", "attachments": [], "created_by_name": "Omid Rashidi", "created_at": "March 12, 2017 at 1:56am", "created_by": "OmidmRashidi", "replies": [{"body": "\nOmid, Thank you for providing that link. I'd like to avoid paying money for now, but I will play around with the demo version to see if I can use it. Thanks!\n", "attachments": [], "created_by_name": "Mike Johnson", "created_at": "March 12, 2017 at 10:48pm", "created_by": "MikeJohnson", "replies": []}]}, {"body": "\nHi Mike,\n\n\n\nIn addition to what Omid said, if you want to create a sky matrix from your data alone, you'd also need horizontal diffuse radiation values. The sky model used in Ladybug and Honeybee is based on [Perez Skies](http://www.sciencedirect.com/science/article/pii/0038092X9090055H). The sky matrix is created based on [Reinhart patch subdivisions](http://www.enob.info/fileadmin/media/Publikationen/EnOB/Dissertation_C.Reinhart.pdf).\n\nBelow is a visualization of the Perez sky for a particular time and the sky-matrix corresponding to that.\n\n[<img class=\"align-left\" src=\"http://api.ning.com:80/files/3acUQbRQgG6SO-FR9VQTfCMdxGvexjrMap7pdh5VtDVS6Kv89KF9GH1019qmyAlYvhWwNJSubngVxdWjysRGfiQadL7-rdbW/Selection_142.jpg\" style=\"padding: 10px;\" width=\"261\"/>](http://api.ning.com:80/files/3acUQbRQgG6SO-FR9VQTfCMdxGvexjrMap7pdh5VtDVS6Kv89KF9GH1019qmyAlYvhWwNJSubngVxdWjysRGfiQadL7-rdbW/Selection_142.jpg)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe issue with using direct solar radiation only is that you won't be able to consider the effect of sky radiation in your simulation as shown below (the image on the right is sun-only):\n\n[<img class=\"align-left\" src=\"http://api.ning.com:80/files/3acUQbRQgG6HhXbZvfCcuDq1WCfQ6ey4Cu*4BrV4trbxd9BzDHk1RcQvC5vV8SrIW9ykIOVdxfS2p49JDPaf5hneCk4-HVEZ/Selection_143.jpg?width=261\" style=\"padding: 10px;\" width=\"261\"/>](http://api.ning.com:80/files/3acUQbRQgG6HhXbZvfCcuDq1WCfQ6ey4Cu*4BrV4trbxd9BzDHk1RcQvC5vV8SrIW9ykIOVdxfS2p49JDPaf5hneCk4-HVEZ/Selection_143.jpg)\n\n\n\n\n\n\n\n\n\n\n\n\n\nOnce you have the hourly data for direct-normal and diffuse horizontal radiation for the entire year, generating an epw(and then the wea) file from that isn't that difficult. We should be able to help you with that.\n", "attachments": [], "created_by_name": "Sarith Subramaniam", "created_at": "March 12, 2017 at 6:26am", "created_by": "sarith", "replies": [{"body": "\nOk great, thank you for the response.<br/><br/>So now I have 2 data columns - one for direct radiation (hour by hour for 1 year) and for diffuse radiation (also hour by hour for 1 year).\u00a0<br/><br/>And then I have the location data.<br/><br/>I took a look at the link that Omid provided, but it seems as if it is paid software, which I want to avoid. Since I have all of the necessary data, I would like to make an epw file or a custom sky using the Ladybug/Honeybee components. Could you help me with this? Thank you!\n", "attachments": [], "created_by_name": "Mike Johnson", "created_at": "March 12, 2017 at 10:45pm", "created_by": "MikeJohnson", "replies": []}, {"body": "\nCan you share the files here?\n", "attachments": [], "created_by_name": "Sarith Subramaniam", "created_at": "March 13, 2017 at 7:14am", "created_by": "sarith", "replies": []}, {"body": "\nYes absolutely!<br/>Attached is the raw data: Direct solar radiation, diffuse radiation, ambient temperature, and location.<br/><br/>A couple things I would like to note:\n\n\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1711094", "name": "weatherFile.xlsx"}], "created_by_name": "Mike Johnson", "created_at": "March 13, 2017 at 1:45pm", "created_by": "MikeJohnson", "replies": []}, {"body": "\nSo, here is a quick fix. The idea is to take an existing epw file and replace the desired datasets and location info. Below are some images as proof of concept. The first sun path contains data from the original epw file. The next one contains your dataset. The dataset to be replaced needs to be contained in a csv file as attached. You can replace more data from the original file by addiing additional columns in that CSV and assiging the correct column number in the grasshopper file. The ordering of columns in an EPW file is shown in the last image. For example, Direct-Normal rad is column -21 and Diff-Horz rad is -20. All of this will be clearer once you check the attached gh file.:\n\n\n\n[<img class=\"align-left\" src=\"http://api.ning.com:80/files/9e-LbPNbsUtuq5zG5Udn2J*hdYetFOYbAol4Bx*GzlSr1zsyXSUMwXK0WWZdYnvJfpccQtBESMlUE9Ni-9fiDi825Z19tZrv/original.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/9e-LbPNbsUtuq5zG5Udn2J*hdYetFOYbAol4Bx*GzlSr1zsyXSUMwXK0WWZdYnvJfpccQtBESMlUE9Ni-9fiDi825Z19tZrv/original.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[<img class=\"align-left\" src=\"http://api.ning.com:80/files/9e-LbPNbsUvfulUL*OYKtAVCklds0qE4ynLbDvs1KQGJhT4t3qJUCBHX7uaH7xxaL2zMIa4AgBDfHN*ODLmNTz03C*1Hnezw/replaced.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/9e-LbPNbsUvfulUL*OYKtAVCklds0qE4ynLbDvs1KQGJhT4t3qJUCBHX7uaH7xxaL2zMIa4AgBDfHN*ODLmNTz03C*1Hnezw/replaced.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[<img class=\"align-left\" src=\"http://api.ning.com:80/files/9e-LbPNbsUuVs7NoHT3x-eYBISMb5qw9Wq2o8yV3u6qefhjnWMEKtLKw3fISGxXtOqaT-hq2gi7rbmfDkNvA114s*pjHIRe9/313201750452PM.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/9e-LbPNbsUuVs7NoHT3x-eYBISMb5qw9Wq2o8yV3u6qefhjnWMEKtLKw3fISGxXtOqaT-hq2gi7rbmfDkNvA114s*pjHIRe9/313201750452PM.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\nBy the way, that theory about diffuse radiation being 10-40% of direct does not really hold. In a place like Seattle, one can expect to go without seeing the sun for extended periods of time and only see visible radiation from the sky.\n\n\n\n(PS: I am sure there are probably more elegant ways to do this..I just wrote it this way to check if it was at all possible to do this with grasshopper).\n\n\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1711436", "name": "weatherDataReplace.gh"}, {"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1711437", "name": "weatherFile.csv"}], "created_by_name": "Sarith Subramaniam", "created_at": "March 13, 2017 at 4:38pm", "created_by": "sarith", "replies": []}, {"body": "\nAdditional data that needs to be entered in the csv file is as per this:\n\n[<img class=\"align-left\" src=\"http://api.ning.com:80/files/9e-LbPNbsUsTXtzb0572oUkpCth2gSspX6iJecv*vF5MWSyGJVnEWYGvdf-gmw6XkGm29ZHssoGPv5KQDhtAZLqITGCOVA8D/313201764216PM.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/9e-LbPNbsUsTXtzb0572oUkpCth2gSspX6iJecv*vF5MWSyGJVnEWYGvdf-gmw6XkGm29ZHssoGPv5KQDhtAZLqITGCOVA8D/313201764216PM.png)\n", "attachments": [], "created_by_name": "Sarith Subramaniam", "created_at": "March 13, 2017 at 4:43pm", "created_by": "sarith", "replies": []}, {"body": "\nThank you, it worked! I was able to use your component successfully to change the .epw file by substituting in my data.<br/><br/>I then tried to feed the new EPW file into the following components: genCumulativeSkyMtx \u00a0&gt; selectSkyMtx &gt; SkyDome for visualization. This required an Ladybug update, so i used the update component to update everything from 0.0.63 to 0.0.64. After the update I was able to see this:<br/><br/>[<img class=\"align-full\" src=\"http://api.ning.com:80/files/ddeRwSwuoGF3yJyXH8avJto1CZYl3TtNbkoDfVxnRBf8*7YuBv4XyIwOZMLoKFZLR7htrDPhSg04AJH1147185fFYgT85hZD/sky.PNG\" width=\"628\"/>](http://api.ning.com:80/files/ddeRwSwuoGF3yJyXH8avJto1CZYl3TtNbkoDfVxnRBf8*7YuBv4XyIwOZMLoKFZLR7htrDPhSg04AJH1147185fFYgT85hZD/sky.PNG)which is over a 24 hour analysis period. (Look good?)\n\n<br/>However, after I was able to obtain the sky matrix, the sun path component gave me an error :\u00a01. Solution exception:global name '_solarOrStandardTime_' is not defined<br/><br/>I checked to make sure that _solarOrStandardTime was defined on the compnent (it is set to false).<br/><br/>Any ideas on what is going on?\n\n\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/ddeRwSwuoGGXHPc7Jj1v7x4fYFxGACCyNRkuDU-pwgUuww9KXm0ZUFGrtGh2NEF1Bbrbo15*zr*WcbCAhZZXoaQy-3*IklNp/ghfile.PNG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/ddeRwSwuoGGXHPc7Jj1v7x4fYFxGACCyNRkuDU-pwgUuww9KXm0ZUFGrtGh2NEF1Bbrbo15*zr*WcbCAhZZXoaQy-3*IklNp/ghfile.PNG)\n", "attachments": [], "created_by_name": "Mike Johnson", "created_at": "March 14, 2017 at 12:42pm", "created_by": "MikeJohnson", "replies": []}, {"body": "\nIs this happening with both the epw files ? If yes, it has to be a bug.\n", "attachments": [], "created_by_name": "Sarith Subramaniam", "created_at": "March 14, 2017 at 2:17pm", "created_by": "sarith", "replies": []}, {"body": "\nJust connected the original EPW file to the sun path component, and the error did not go away. So, possible bug. I am going to make sure I updated the components properly\n", "attachments": [], "created_by_name": "Mike Johnson", "created_at": "March 14, 2017 at 3:40pm", "created_by": "MikeJohnson", "replies": []}, {"body": "\nit looks like the input variable on the gh component is \"solarOrStandardTime_\" but in the code it is \"_solarOrStandardTime_\" Maybe this could be the problem.\n\n\n\nI looked at the old 0.0.63 component and the difference is that first underscore is not present on the variable. This could be the issue?\n", "attachments": [], "created_by_name": "Mike Johnson", "created_at": "March 14, 2017 at 3:44pm", "created_by": "MikeJohnson", "replies": []}]}]}