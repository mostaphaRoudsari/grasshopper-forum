{"body": "\nHi everybody,\n\neverytime I try to write the idf or osm file from the attached file, Rhino crashes.\n\nAlso, some of the boundary conditions aren't being recognized properly... Does anybody have a clue how this could be fixed?\n\nCheers\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1579131", "name": "hotel.gh"}], "created_by_name": "Albert Pressler", "created_at": "August 9, 2016 at 7:22am", "created_by": "AlbertPressler", "topic": "Rhino keeps crashing at Export", "replies": [{"body": "\nAlbert,\n\n\n\nThanks for the clean file that recreates the error. \u00a0Unfortunately, the error seems to be on McNeel's or OpenStudio's side of things and I don't know if there is much we can do to help on our end. \u00a0I checked the error log in VisualStudio and it seems the error is the following:\n\nAn unhandled exception of type 'System.StackOverflowException' occurred in RhinoCommon.dll\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/S8fITn3Ibtsun3RubnPlqWRyyOr8brMzk5wawKjD*usYLbpFtVkh2waKH3ABmw0*6m6AbJw0*VwIEc8gxvws7Rm89C1A3zF2/DotNETException.JPG\" width=\"412\"/>](http://api.ning.com:80/files/S8fITn3Ibtsun3RubnPlqWRyyOr8brMzk5wawKjD*usYLbpFtVkh2waKH3ABmw0*6m6AbJw0*VwIEc8gxvws7Rm89C1A3zF2/DotNETException.JPG)\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/S8fITn3IbttZ0q96r-jyrPfyjbVGqEDdXZ7w9TiaVb62QMdbbH9Sb8XaKF5jb8l8d9X54oTiwzxYTIYC*iNbeGB13AAKQlrW/DotNETException2.JPG\" width=\"456\"/>](http://api.ning.com:80/files/S8fITn3IbttZ0q96r-jyrPfyjbVGqEDdXZ7w9TiaVb62QMdbbH9Sb8XaKF5jb8l8d9X54oTiwzxYTIYC*iNbeGB13AAKQlrW/DotNETException2.JPG)\n\n\n\nOne thing I can say is that the GH script will probably run if you export the building in two steps (each with half the zones) and try to merge the teo files in the OpenStudio interface using the method posted here:\n\n[https://unmethours.com/question/3951/merge-two-openstudio-files/](https://unmethours.com/question/3951/merge-two-openstudio-files/)\n\n\n\nI know it's hacky but let me know if you get the chance to try that out.\n\n-Chris\n", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "August 9, 2016 at 4:17pm", "created_by": "ChrisMackey", "replies": [{"body": "\nSince it happens both for idf and osm it's probably an issue with Rhino. I'm going to take a look and report back if I could find why it is happening.\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "August 9, 2016 at 4:23pm", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nThe issue seems to be very small surfaces that are created after the intersections because the model is not clean. Some lines are not aligned and are slightly off. After removing small faces I can export the model to OpenStudio but I don't recommend this approach. How are you generating the geometries?\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/S8fITn3IbtsZlWfkeEVKCQZ1W7M12ZUqa0qd3VYtNZWbd2G*paFj4GQUQ7ZTFdeL5Dq9BQDFyhRB2Ia5TyyetzrNf3tzLl3E/exportIdf.PNG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/S8fITn3IbtsZlWfkeEVKCQZ1W7M12ZUqa0qd3VYtNZWbd2G*paFj4GQUQ7ZTFdeL5Dq9BQDFyhRB2Ia5TyyetzrNf3tzLl3E/exportIdf.PNG)\n", "attachments": [], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "August 9, 2016 at 5:27pm", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "\nI have traced the pdf floor plans in Rhino and extruded them... thought it was clean though. I'll check everything again.\n", "attachments": [], "created_by_name": "Albert Pressler", "created_at": "August 10, 2016 at 2:15am", "created_by": "AlbertPressler", "replies": []}, {"body": "\nHi Albert.\n\n\n\nI remember that I awe you a video on how generate geometries from floor plans! I put a script together that can help you to clean your file. I put the closed curve for each floor under a separate layer, and used 'dynamic geometry pipeline' from Human plugin to bring them to grasshopper. Then projected each group to floor plane. Then I used a script that I originally wrote for another\u00a0[discussion](http://www.grasshopper3d.com/xn/detail/2985220:Comment:1528124)\u00a0to find the points that are close to each other but don't align.\n\n\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/SfsQAdhhVittKKnea4caMnTbFqVaIwjMTEICtxGZe49B7uErZP-ui6ri8ePXJrYLjJuiyFWUWfK4VcQJ-1K0gQV3l-Ag8V2g/find_problematic_points.png?width=721\" width=\"721\"/>](http://api.ning.com:80/files/SfsQAdhhVittKKnea4caMnTbFqVaIwjMTEICtxGZe49B7uErZP-ui6ri8ePXJrYLjJuiyFWUWfK4VcQJ-1K0gQV3l-Ag8V2g/find_problematic_points.png)\n\n\n\n\n\nI also projected all the curves to XY plane which you can use to check all the plan curves at different floors together. For editing the curves use plan view and set planar to True and then select control points and move them around to make sure the lines are aligned perfectly. Since I'm using Dynamic Geometry Pipeline component each time that you change a line it will recalculate the script. You can alternatively use Grasshopper's Geometry Pipeline component but then you need to re-run the script after making changes in Rhino.\n\n\n\nI attached both Rhino and Grasshopper files. You need to have Human plugin installed to be able to use this script.\n\n\n\nHope it helps,\n\nMostapha\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1579409", "name": "checkPlanCurves.gh"}, {"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1579810", "name": "hotel_projected_lines.3dm"}], "created_by_name": "Mostapha Sadeghipour Roudsari", "created_at": "August 10, 2016 at 6:43am", "created_by": "MostaphaSadeghipour", "replies": []}, {"body": "", "attachments": [], "created_by_name": "Chris Mackey", "created_at": "August 10, 2016 at 7:28am", "created_by": "ChrisMackey", "replies": []}, {"body": "\nChris,\n\n\n\nthanks for the advice! I'll make sure not to mess with the tolerances...\n\nAs for the object snaps, I always use them but sometimes it can be tricky if there are tiny gaps in the underlying floor plan, so one has to be very careful not to snap to the line that lies a nanometer awway from the last one. Thus, when snapping to a neighboring zone it's better to hide the floor plan in order to reduce the risk of not snapping to the geometry that's already drawn. Can be annoying though...\n\nCheers!\n", "attachments": [], "created_by_name": "Albert Pressler", "created_at": "August 10, 2016 at 12:43pm", "created_by": "AlbertPressler", "replies": []}, {"body": "\nHey Mostapha,\n\nthanks a lot for the file... I checked the whole model again and cleaned it up, so it should be alright now. But unfortunately when I try to export, it still won't work.\n\nI can export two floors at a time, when I add a third floor, Rhino crashes again.So I've tried Chris' method and exported several osm files, each with 2 floors in them (the top floor with the single zone can be exported together with the 2 underlying floors). But merging the files in Sketchup doesn't work either (I've tried both suggested methods).\n\nThe cleaned file is attached. Maybe you could try again if it works on your computer?\n\nThanks!\n\n\n\nPS: You are better at remembering than me ;) But I'd love to see a video for that some day!\n\n\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1579914", "name": "hotel.gh"}], "created_by_name": "Albert Pressler", "created_at": "August 10, 2016 at 12:36pm", "created_by": "AlbertPressler", "replies": []}]}]}