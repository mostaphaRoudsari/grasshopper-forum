{"body": "\nHi,\n\nI'm finding some inconsistencies in the viewAnalysis component when i check the percentage of a surface seen from a point.\n\nThe point happens to be the sun position. Usually it works fine, but for some specific cases it is giving viewing results for occluded surfaces.\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/MKXGwdaYxGGryPAuiELMozfKcbCq-4GNJ0qCA3MXsuu32v73haJ5WfWAF*s5j3VF3HyF5klDMQyuduDC3Zq1hJhvOmBfePon/Capture.JPG?width=750\" width=\"750\"/>](http://api.ning.com:80/files/MKXGwdaYxGGryPAuiELMozfKcbCq-4GNJ0qCA3MXsuu32v73haJ5WfWAF*s5j3VF3HyF5klDMQyuduDC3Zq1hJhvOmBfePon/Capture.JPG)You can see from the plan view (top-left) that the line of view can not see the surface, but from the top-right view you can see that some portion of the surface appear as \"seen\" (blue color). At the bottom-right you can see the view from the sun, just to confirm that the surface is occluded.\n\nAttached the file i'm using. In general the results are fine, but just wonder what happens here.\n\nFor those of you interested in such kind of analysis i recommend to set the sunpath scale to a high value.\n\n\n\nThanks,\n\n-A.\n\n\n\n\n\na\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1801419", "name": "GSC_00.gh"}], "created_by_name": "Abraham Yezioro", "created_at": "August 20, 2017 at 11:24pm", "created_by": "AbrahamYezioro", "topic": "[solved]viewAnalysis - Inconsistency", "replies": [{"body": "\nAbraham,\n\nIt took me a few re-readings of your question but I think that I have finally understood it and know the answer.\n\nYou can always get a glimpse into how the view component works by drawing lines in between the output testPts and the input points into the _viewTypeOrPts like so:\n\n[<img class=\"align-full\" src=\"http://api.ning.com:80/files/8q4PeepMCcidKP*Q6BcrIXWya9qOjQL66At-PYeMdJvqI*dVwgts9yV8blUo3-NzH9*kJZJLbxVBBU8aUidd5cj736rWzSIV/ViewAnalysis.JPG?width=721\" width=\"721\"/>](http://api.ning.com:80/files/8q4PeepMCcidKP*Q6BcrIXWya9qOjQL66At-PYeMdJvqI*dVwgts9yV8blUo3-NzH9*kJZJLbxVBBU8aUidd5cj736rWzSIV/ViewAnalysis.JPG)\n\nWhen you do this, you will see that the lines from the mesh faces you identify do not actually intersect any geometry, although this is largely because the _distFromBase is moving the points far enough away from the base surface so that the line clears any intersecting geometry. So, if you set the\u00a0_distFromBase to be smaller in your file, you will see that those surfaces you have there get occluded.\n\nAlso, for this specific case of view to the sun, I would sooner recommend that someone use the \"Ladybug_Sunlight Hours\" component for a shadow study rather than setting the sunPath scale to be very large:\n\n[http://hydrashare.github.io/hydra/viewer?owner=mostaphaRoudsari&amp;amp...;](http://hydrashare.github.io/hydra/viewer?owner=mostaphaRoudsari&amp;fork=hydra_1&amp;id=Shadow_Range_analysis&amp;slide=0&amp;scale=1&amp;offset=0,0)\n\nSunlight hours will use the actual vector for intersections (instead of a line) and you therefore don't have to worry about how far away the sun position is.\n\n\n\n-Chris\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1801764", "name": "GSC_00_CWM.gh"}], "created_by_name": "Chris Mackey", "created_at": "August 21, 2017 at 8:14pm", "created_by": "ChrisMackey", "replies": [{"body": "\nThanks Chris,\n\nAs soon as i saw the lines i get the issue was with the _distFromSurface. Live and learn.\n\nAs for the LB_SunlightHours i'm not sure i get your suggestion. The view analysis and the sunlightHours give different outputs for my needs. I want to calculate the amount of area that is in light/shade, as we have here standard requirements for that. Is clear that for the shadow study the sunLight is the one to use.\n\nThanks again,\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "August 21, 2017 at 9:17pm", "created_by": "AbrahamYezioro", "replies": []}, {"body": "\nAbraham,\n\nI am also not sure that I am understanding correctly. \u00a0I attached an example that uses the sunlight hours component. \u00a0Would this one satisfy your needs or is there a nuance to your analysis that I am missing?\n\n-Chris\n", "attachments": [{"link": "http://www.grasshopper3d.com/group/ladybug/forum/attachment/download?id=2985220%3AUploadedFile%3A1801776", "name": "GSC_00_CWM2.gh"}], "created_by_name": "Chris Mackey", "created_at": "August 21, 2017 at 9:36pm", "created_by": "ChrisMackey", "replies": []}, {"body": "\nOhhh!\n\nLive and learn # 2.\n\nNow i see what you mean. This is fine too. Always better to have options.\n\n\n\nThanks a lot!!\n\n-A.\n", "attachments": [], "created_by_name": "Abraham Yezioro", "created_at": "August 21, 2017 at 9:44pm", "created_by": "AbrahamYezioro", "replies": []}]}]}